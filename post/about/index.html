<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Grideaé™æ€ä¸ªäººåšå®¢">
<meta name="description" content="å¿«ä¹æ‘¸é±¼">
<meta name="theme-color" content="#000">
<title>å…³äº | CodeMogg</title>
<link rel="shortcut icon" href="/favicon.ico?v=1597996378103">
<link rel="stylesheet" href="/media/css/gemini.css">
<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/Github.css"
  rel="stylesheet">

<link rel="stylesheet" href="/styles/main.css">

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
  integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
  integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
  onload="renderMathInElement(document.body);"></script>




<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?b6a53f1bc678a40fd469038fee84fd3d";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>


  <meta name="description" content="å…³äº" />
  <meta name="keywords" content="" />
</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>CodeMogg</span>
            </a>  
          
        </div>
        
          <p class="subtitle">å¿«ä¹æ‘¸é±¼</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> é¦–é¡µ
                </a>
              
            </li>
          
            
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> å½’æ¡£
                </a>
              
            </li>
          
            
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> æ ‡ç­¾
                </a>
              
            </li>
          
            
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> å…³äº
                </a>
              
            </li>
          
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">æœç´¢</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout gemini ">
      <div class="section-layout-wrapper">
        

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper bg-color right-motion" id="sidebar">
      
        <div class="post-list-sidebar">
          <div class="sidebar-title">
            <span id="tocSideBar" class="sidebar-title-item sidebar-title-active language" data-lan="index">æ–‡ç« ç›®å½•</span>
            <span id="metaSideBar" class="sidebar-title-item language" data-lan="preview">ç«™ç‚¹æ¦‚è§ˆ</span>
          </div>
        </div>
      
      <div class="sidebar-body gemini" id="sidebar_body">
        
          
            <div class="post-side-meta" id="post_side_meta">
              
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="/images/avatar.png"/>
    <p class="site-author-name">Mogg</p>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">4</span>
        <span class="site-item-stat-name language" data-lan="article">æ–‡ç« </span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">3</span>
        <span class="site-item-stat-name language" data-lan="category">åˆ†ç±»</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">3</span>
        <span class="site-item-stat-name language" data-lan="tag">æ ‡ç­¾</span>
      </a>
    </div>
  </div>
  
    
  
  

  



</div>
            </div>
            <div class="post-toc sidebar-body-active" id="post_toc" style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto"
    id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%85%B3%E4%BA%8E%E6%9C%AC%E7%AB%99">ğŸ  å…³äºæœ¬ç«™</a></li>
<li><a href="#%E5%8D%9A%E4%B8%BB%E6%98%AF%E8%B0%81">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</a></li>
<li><a href="#%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD">â›¹ å…´è¶£çˆ±å¥½</a></li>
<li><a href="#%E8%81%94%E7%B3%BB%E6%88%91%E5%91%80">ğŸ“¬ è”ç³»æˆ‘å‘€</a></li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

  let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1;
  let active = 'active-show', activeClass = 'active-current';
  let tocWrapper = document.querySelector('#toc_wrapper');
  let tocContent = tocWrapper.children[0];
  let autoNumber = tocWrapper && tocWrapper.classList.contains('auto-number');

  function addTocNumber(elem, deep) {
    if (!elem) {
      return;
    }
    let prop = elem.__proto__;

    if (prop === HTMLUListElement.prototype) {
      for (let i = 0; i < elem.children.length; i++) {
        addTocNumber(elem.children[i], deep + (i + 1) + '.');
      }
    } else if (prop === HTMLLIElement.prototype) {
      // ä¿å­˜liå…ƒç´ 
      if (elem.children[0] && elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
        lList.push(elem);
      }
      for (let i = 0; i < elem.children.length; i++) {
        let cur = elem.children[i];
        if (cur.__proto__ === HTMLAnchorElement.prototype) {
          if (autoNumber) {
            cur.text = deep + ' ' + cur.text;
          }
        } else if (cur.__proto__ === HTMLUListElement.prototype) {
          addTocNumber(cur, deep);
        }
      }
    }
  }

  function removeParentActiveClass() {
    let parents = tocContent.querySelectorAll('.' + active)
    parents.forEach(function (elem) {
      elem.classList.remove(active);
    });
  }

  function addActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.add(activeClass);
    }
  }

  function removeActiveClass(index) {
    if (index >= 0 && index < hList.length) {
      lList[index].classList.remove(activeClass);
    }
  }

  function addActiveLiElemment(elem, parent) {
    if (!elem || elem === parent) {
      return;
    } else {
      if (elem.__proto__ === HTMLLIElement.prototype) {
        elem.classList.add(active);
      }
      addActiveLiElemment(elem.parentElement, parent);
    }
  }

  function showToc() {
    if (tocWrapper) {
      postBody = document.querySelector('#post_body');
      for (let i = 0; i < postBody.children.length; i++) {
        if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
          hList.push(postBody.children[i]);
        }
      }
      if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
      } else if (tocWrapper.classList.contains('no_compress')) {
        tocContent.classList.add('expanded');
      } else {
        if (hList.length > 10) {
          active = 'active-hidden'
          tocContent.classList.add('closed');
        } else {
          tocContent.classList.add('expanded');
        }
      }
    }
  }

  (function () {
    // å¤„ç†ä¸æ˜¯ä»#ä¸€çº§æ ‡é¢˜å¼€å§‹ç›®å½•
    if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
      let con = tocContent.children[0].children[0];
      tocContent.innerHTML = con.innerHTML;
    }
    let markdownItTOC = document.querySelector('.markdownIt-TOC');
    let innerHeight = window.innerHeight;
    markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
    addTocNumber(tocContent, '');
  })();

  document.addEventListener('scroll', function (e) {
    if (lList.length <= 0) {
      return;
    }
    let scrollTop = document.scrollingElement.scrollTop + 10;
    let dir;

    if (lastTop - scrollTop > 0) {
      dir = 'up';
    } else {
      dir = 'down';
    }

    lastTop = scrollTop;
    if (scrollTop <= 0) {
      if (lastIndex >= 0 && lastIndex < hList.length) {
        lList[lastIndex].classList.remove(activeClass);
      }
      return;
    }

    let current = 0, hasFind = false;
    for (let i = 0; i < hList.length; i++) {
      if (hList[i].offsetTop > scrollTop) {
        current = i;
        hasFind = true;
        break;
      }
    }
    if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
      current = hList.length - 1;
    } else {
      current--;
    }
    if (dir === 'down') {
      if (current > lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex)
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    } else {
      if (current < lastIndex) {
        addActiveClass(current);
        removeActiveClass(lastIndex);
        lastIndex = current;
        removeParentActiveClass();
        lList[current] && addActiveLiElemment(lList[current].parentElement, tocContent);
      }
    }
  });


  window.addEventListener('load', function () {
    showToc();
    document.querySelector('#sidebar').style = 'display: block;';
    tocWrapper.classList.add('toc-active');
    setTimeout(function () {
      if ("createEvent" in document) {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent("scroll", false, true);
        document.dispatchEvent(evt);
      }
      else {
        document.fireEvent("scroll");
      }
    }, 500)
  })

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    window.Velocity(hideElement, 'stop');
    window.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        window.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
        <div class="section-box box-shadow-wrapper">
          <div class="section bg-color post post-page">
            <section class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://codemogg.cn/post/about/">
      å…³äº
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span class="language" data-lan="publish">å‘å¸ƒäº</span>
      <span class="publish-time" data-t="2019-01-25 19:09:48">2019-01-25</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>1<span class="language" data-lan="minute">åˆ†é’Ÿ</span></span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>31<span class="pc-show language" data-lan="words">å­—æ•°</span></span>
    </span>
    
  </div>
</section>
            <div class="post-body next-md-body" id="post_body">
              <blockquote>
<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤</p>
</blockquote>
<h2 id="å…³äºæœ¬ç«™">ğŸ  å…³äºæœ¬ç«™</h2>
<h2 id="åšä¸»æ˜¯è°">ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°</h2>
<h2 id="å…´è¶£çˆ±å¥½">â›¹ å…´è¶£çˆ±å¥½</h2>
<h2 id="è”ç³»æˆ‘å‘€">ğŸ“¬ è”ç³»æˆ‘å‘€</h2>

            </div>
            
            
            
  <script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<div id="vcomments" style="padding: 10px 0px 0px 0px"></div>

<style>
  .v .veditor {
    min-height: 10rem;
    background-image: url('');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: right;
    background-color: rgba(255, 255, 255, 0);
    resize: none;
  }

  .v .vwrap {
    border: 1px solid #000 !important;
  }

  .v .vbtn {
    padding: .4rem 1.2rem !important;
    border-color: #fff !important;
    background-color: #49b1f5 !important;
    color: #fff !important;
    font-size: .7rem !important;
  }

  .v .vcards .vcard .vh .vmeta .vat {
    padding: 0 .8rem !important;
    border: 1px solid #00c4b6 !important;
    border-radius: 5px !important;
    color: #00c4b6 !important;
  }
</style>
<script>
  new Valine({
    el: '#vcomments',
    appId: 'hoChhayEKUvqnBfWK7SrvW70-gzGzoHsz',
    appKey: 'CvVIRV70L41XFekBF9mOoDDQ',
    avatar: 'mp',
    placeholder: '',
    pageSize: '',
    lang: 'zh-cn',
    enableQQ: 'true' === 'false',
    visitor: 'true' === 'false',
    highlight: 'true' === 'true',
    avatarForce: 'true' === 'false',
  });
</script>

          </div>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | Â© 2019-2020 Theme By <a
        href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      
    </div>
  </footer>
  
  
  <div class="gemini back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.onresize = function () {
    calcuHeight();
  }

  function calcuHeight() {
    // åŠ¨æ€è°ƒæ•´ç«™ç‚¹æ¦‚è§ˆé«˜åº¦
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, transitionDir, {});
          }
        })
        window.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // é“¾æ¥è·³è½¬
  let newWindow = 'false'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // ä»£ç é«˜äº®
  hljs.initHighlightingOnLoad();
  
  // ç¦»å¼€å½“å‰é¡µtitleå˜åŒ–
  var leaveTitle = "";
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>
    <div class="light-box" id="light_box"></div>
<script>
  let imgs = document.querySelectorAll('.post-body img');
  let lightBox = document.querySelector('#light_box');
  lightBox.addEventListener('mousedown', (e) => {
    e.preventDefault()
  })
  lightBox.addEventListener('mousewheel', (e) => {
    e.preventDefault()
  })
  let width = window.innerWidth * 0.8;
  lightBox.onclick = () => {
    let img = lightBox.querySelector('img');
    lightBox.style = '';
    img && img.remove();
  }
  imgs.forEach(item => {
    item.onclick = function (e) {
      let lightImg = document.createElement('img');
      lightImg.src = this.src;
      lightBox.style = `height: 100%; opacity: 1; background-color: rgba(0, 0, 0, 0.5);cursor: zoom-out;`;
      lightImg.style = `width: ${width}px;border-radius: 2px;`;
      lightImg.onclick = function () {
        lightBox.style = '';
        this.remove();
      }
      lightBox.append(lightImg);
    }
  })
</script>
    <div class="reward-mask" style="display: none;">
  <div class="reward-relative">
    <span class="close" aria-hidden="true">x</span>
    <div class="reward-body">
      <h2>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼Œæˆ‘ä¼šç»§ç»­åŠªåŠ›çš„!</h2>
      <div class="reward-img-box">
        <div style="position: relative; width: 140px; height: 140px;">
          
          
          
        </div>
      </div>
      <p class="reward-word">æ‰«ç æ‰“èµï¼Œä½ è¯´å¤šå°‘å°±å¤šå°‘</p>
      <p class="reward-tip">æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
    </div>
    <div class="bottom">
      
      
    </div>
  </div>
</div>
<style>
  .reward-mask {
    position: fixed;
    z-index: 99999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #00000054;
  }

  .reward-relative {
    position: relative;
    width: 480px;
    text-align: center;
    margin: 0 auto;
    border-radius: 5px;
    background-color: #fff;
    top: 50%;
    margin-top: -205px;
  }

  .reward-relative .close {
    position: absolute;
    right: 10px;
    font-weight: normal;
    font-size: 16px;
    color: #929292;
  }

  .reward-body {
    padding: 40px 20px 20px;
  }

  .bottom {
    display: flex;
  }

  .reward-btn {
    text-align: center;
  }

  .reward-btn-text {
    display: inline-block;
    cursor: pointer;
    width: 60px;
    height: 60px;
    line-height: 60px;
    border-radius: 50%;
    background-color: #ff9734;
    color: #FFF;
    margin-top: 20px;
  }

  .pay-text {
    margin-top: 10px;
    padding: 10px;
    flex: 1;
    transition: all .2s linear;
  }

  .pay-text:hover {
    background-color: #a5a5a536;
  }

  .reward-body h2 {
    padding-top: 10px;
    text-align: center;
    color: #a3a3a3;
    font-size: 16px;
    font-weight: normal;
    margin: 0 0 20px;
  }

  .reward-body h2:after,
  .reward-body h2:before {
    font-family: Arial, Helvetica, sans-serif;
    background: 0 0;
    width: 0;
    height: 0;
    font-style: normal;
    color: #eee;
    font-size: 80px;
    position: absolute;
    top: 20px;
  }

  .reward-body h2:before {
    content: '\201c';
    left: 50px;
  }

  .reward-body h2:after {
    content: '\201d';
    right: 80px;
  }

  .reward-img-box {
    display: inline-block;
    padding: 10px;
    border: 6px solid #ea5f00;
    margin: 0 auto;
    border-radius: 3px;
    position: relative;
  }

  .reward-img {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
  }

  @media (max-width: 767px) {
    .reward-relative {
      height: 100%;
      top: 0px;
      margin-top: 0;
      width: auto;
    }

    .reward-relative .bottom {
      flex-direction: column;
    }

    .reward-relative .pay-text {
      width: 80%;
      margin: 5px auto;
      border: 1px solid silver;
      padding: 6px;
      border-radius: 4px;
    }

    .reward-body h2:after {
      right: 40px;
    }

    .reward-body h2:after,
    .reward-body h2:before {
      font-size: 60px;
    }

    .reward-body h2:before {
      left: 20px;
    }
  }
</style>
<script>
  !function () {
    var mask = document.querySelector('.reward-mask');
    let close = document.querySelector('.reward-relative .close');
    let rewardBtn = document.querySelector('.reward-btn');

    let zfb = document.querySelector('#zfb'),
      wx = document.querySelector('#wx'),
      zfbBtn = document.querySelector('#zfbBtn'),
      wxBtn = document.querySelector('#wxBtn');

    if (zfbBtn && wxBtn) {
      zfbBtn.addEventListener('click', () => {
        window.Velocity(zfb, 'transition.slideLeftIn', {
          duration: 400
        });
        window.Velocity(wx, 'transition.slideRightOut', {
          display: 'none',
          duration: 400
        });
      });

      wxBtn.addEventListener('click', () => {
        window.Velocity(wx, 'transition.slideRightIn', {
          duration: 400
        });
        window.Velocity(zfb, 'transition.slideLeftOut', {
          display: 'none',
          duration: 400
        });
      });
    }

    rewardBtn.addEventListener('click', (e) => {
      window.Velocity(mask, 'transition.slideDownIn', {
        duration: 400
      })
    });

    close.addEventListener('click', (e) => {
      e.preventDefault();
      window.Velocity(mask, 'transition.slideUpOut', {
        duration: 400
      })
    })
  }()
</script>

  </div>
</body>

<div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="æœç´¢">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">æ¡ç›¸å…³æ¡ç›®ï¼Œä½¿ç”¨äº†</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">æ¯«ç§’</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://codemogg.cn/post/H0FKr9ipF/"" data-c="
          &lt;h1 id=&#34;mapreduce-simplified-data-processing-on-large-clusters&#34;&gt;MapReduce: Simplified Data Processing on Large Clusters&lt;/h1&gt;
&lt;p&gt;å­¦ä¹ MIT6.824ï¼Œå…ˆçœ‹ä¸‰ç¯‡ç»å…¸paper&lt;/p&gt;
&lt;p&gt;è‹±è¯­å¤ªçƒ‚äº†ï¼Œä¸å¾—ä¸å…ˆç¿»è¯‘ä¸€éâ€¦â€¦&lt;/p&gt;
&lt;h2 id=&#34;æ‘˜è¦&#34;&gt;æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;MapReduce&lt;/code&gt;æ˜¯ä¸€ç§ç”¨äºå¤„ç†ã€ç”Ÿæˆå¤§æ•°æ®é›†çš„ç¼–ç¨‹æ¨¡å‹å’Œç›¸å…³å®ç°ã€‚ ç”¨æˆ·æŒ‡å®šä¸€ä¸ª&lt;code&gt;Map&lt;/code&gt;å‡½æ•°å°†ä¸€ä¸ªé”®å€¼å¯¹ç”Ÿæˆä¸ºä¸€ç»„ä¸­é—´é”®å€¼å¯¹é›†åˆï¼Œä¸€ä¸ª&lt;code&gt;Reduce&lt;/code&gt;å‡½æ•°åˆå¹¶æ‰€æœ‰å…·æœ‰ç›¸åŒä¸­é—´keyçš„ä¸­é—´å€¼ã€‚å¦‚paperä¸­æ‰€ç¤ºï¼Œè¿™ä¸ªæ¨¡å‹å¯ä»¥è¡¨ç¤ºæ˜¾ç¤ºä¸–ç•Œä¸­çš„è®¸å¤šä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥è¿™ç§æ–¹å¼ç¼–å†™çš„ç¨‹åºè‡ªç„¶åœ°æ”¯æŒå¹¶è¡Œå’Œåœ¨å¤§è§„æ¨¡çš„å•†ç”¨é›†ç¾¤ä¸Šè¿è¡Œã€‚è¿è¡Œæ—¶ç³»ç»Ÿè´Ÿè´£åˆ’åˆ†è¾“å…¥æ•°æ®ã€åœ¨é›†ç¾¤ä¸Šçš„è°ƒåº¦ã€å¤„ç†æœºå™¨æ•…éšœã€ç®¡ç†é›†ç¾¤å†…éƒ¨çš„é€šä¿¡ã€‚è¿™ä½¿å¾—æ²¡æœ‰ä»»ä½•å¹¶å‘å¤„ç†å’Œåˆ†å¸ƒå¼ç»éªŒçš„ç¨‹åºå‘˜å¯ä»¥è½»æ¾çš„åˆ©ç”¨å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬MapReduceçš„å®ç°è¿è¡Œåœ¨ä¸€ä¸ªå¤§è§„æ¨¡çš„å•†ç”¨æœåŠ¡å™¨é›†ç¾¤ä¸Šï¼Œè€Œä¸”å¯ä»¥çµæ´»çš„ä¼¸ç¼©ã€‚ä¸€ä¸ªå…¸å‹çš„MapReduceè®¡ç®—å¤„ç†å‡ åƒå°æœºå™¨ä¸Šè®¸å¤šTBçš„æ•°æ®ã€‚ç¨‹åºå‘˜å¯ä»¥å‘ç°ç³»ç»Ÿä½¿ç”¨éå¸¸ç®€å•ã€‚åœ¨è°·æ­Œçš„é›†ç¾¤ä¸Šï¼Œæ¯å¤©éƒ½æœ‰å‡ ç™¾ä¸ªMapReduceç¨‹åºã€ä¸€åƒå¤šä¸ªä¸ªMapReduceä»»åŠ¡æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ç®€ä»‹&#34;&gt;1 ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;åœ¨è¿‡å»çš„äº”å¹´é‡Œï¼Œä½œè€…å’Œè°·æ­Œçš„è®¸å¤šå‘˜å·¥å·²ç»å®ç°äº†æˆç™¾ä¸Šåƒä¸ªç‰¹æ®Šç›®çš„ç¨‹åºï¼Œç”¨äºå°†å¤§é‡çš„åŸå§‹æ•°æ®ï¼ˆæ¯”å¦‚æŠ“å–çš„æ–‡æŒ¡ã€ç½‘ç»œè¯·æ±‚logï¼‰å¤„ç†ä¸ºå„ç§è¡ç”Ÿæ•°æ®ï¼ˆæ¯”å¦‚å€’æ’ç´¢å¼•ï¼Œç½‘ç»œæ–‡æ¡£çš„å›¾ç»“æ„çš„å„ç§è¡¨ç¤ºï¼Œæ¯å°ä¸»æœºçˆ¬å–åˆ°çš„é¡µæ•°æ‘˜è¦ï¼ŒæŸä¸€å¤©é‡Œæœ€é¢‘ç¹çš„è¯·æ±‚ç­‰ï¼‰ã€‚è®¸å¤šè®¡ç®—ä»æ¦‚å¿µä¸Šè®²æ˜¯å¾ˆç®€å•çš„ã€‚ä½†æ˜¯ï¼Œè¾“å…¥æ•°æ®æ˜¯éå¸¸åºå¤§çš„ï¼Œè®¡ç®—éœ€è¦åˆ†å¸ƒåˆ°æˆç™¾ä¸Šåƒå°æœºå™¨ä¸Šï¼Œè¿™æ ·æ‰èƒ½åœ¨ä¸€ä¸ªåˆç†çš„æ—¶é—´å†…è·å–åˆ°ç»“æœã€‚å¦‚ä½•å¹¶è¡ŒåŒ–è®¡ç®—ï¼Œåˆ’åˆ†æ•°æ®ï¼Œå¤„ç†å¼‚å¸¸è¿™äº›é—®é¢˜é€šå¸¸éœ€è¦å¤§é‡å¤æ‚çš„ä»£ç å»è§£å†³ï¼Œä½¿å¾—åŸæœ¬ç®€å•çš„è®¡ç®—å˜çš„å¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³å¤æ‚æ€§ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªæŠ½è±¡æ¨¡å‹ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºéœ€è¦çš„ç®€å•çš„è®¡ç®—ï¼Œå¹¶ä¸”å°†å¹¶è¡Œã€å®¹é”™ã€æ•°æ®åˆ’åˆ†ã€å¤æ‚å‡è¡¡è¿™äº›ç»†èŠ‚éšè—åˆ°ä¸€ä¸ªåº“é‡Œã€‚æˆ‘ä»¬çš„æŠ½è±¡æ¨¡å‹çµæ„Ÿæ¥æºäºLispç­‰å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„&lt;code&gt;mapã€reduce&lt;/code&gt;è¡¨ç¤ºã€‚æˆ‘ä»¬è®¤è¯†åˆ°ï¼Œè®¸å¤šè®¡ç®—è¿‡ç¨‹éƒ½åœ¨è¾“å…¥ä¸­çš„é€»è¾‘è®°å½•ä¸Šä½¿ç”¨äº†mapæ“ä½œä»¥å¤„ç†ä¸ºä¸­é—´é”®å€¼å¯¹ï¼Œç„¶ååœ¨æ‰€æœ‰å…·æœ‰ç›¸åŒkeyçš„valueä¸Šä½¿ç”¨reduceæ“ä½œä»¥åˆé€‚åœ°åˆå¹¶å¯¼å‡ºæ•°æ®ã€‚å‡½æ•°æ¨¡å‹çš„ä½¿ç”¨,å†ç»“åˆç”¨æˆ·æŒ‡å®šçš„mapå’Œreduceæ“ä½œ,è®©æˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“çš„å®ç°å¤§è§„æ¨¡å¹¶è¡ŒåŒ–è®¡ç®—,å’Œä½¿ç”¨å†æ¬¡æ‰§è¡Œä½œä¸ºåˆçº§æœºåˆ¶æ¥å®ç°å®¹é”™ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä»½å·¥ä½œçš„ä¸»è¦è´¡çŒ®æ˜¯ä¸€ä¸ªç®€å•ã€æœ‰æ•ˆçš„æ¥å£å¯ä»¥è‡ªåŠ¨å¹¶è¡ŒåŒ–å’Œåˆ†é…å¤§è§„æ¨¡è®¡ç®—ï¼Œç»“åˆè¿™ä¸ªæ¥å£çš„å®ç°æ¥åœ¨å¤§é‡æ™®é€šçš„PCæœºä¸Šå®ç°é«˜æ€§èƒ½è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒèŠ‚æè¿°äº†åŸºæœ¬çš„ç¼–ç¨‹æ¨¡å‹å¹¶ç»™å‡ºäº†ä¸€äº›ä¾‹å­ã€‚ç¬¬ä¸‰èŠ‚ä»‹ç»äº†æˆ‘ä»¬åŸºäºé›†ç¾¤ç¯å¢ƒçš„ Mapreduce æ¥å£å®ç°ã€‚ç¬¬å››èŠ‚ä»‹ç»äº†ç¼–ç¨‹æ¨¡å‹çš„ä¸€äº›æŠ€å·§ã€‚ç¬¬äº”èŠ‚å¯¹æˆ‘ä»¬æ‰§è¡Œå„ç§ä»»åŠ¡çš„æ€§èƒ½è¿›è¡Œäº†åº¦é‡ã€‚ç¬¬å…­èŠ‚ä»‹ç»äº†MapReduceåœ¨è°·æ­Œå†…éƒ¨çš„ä½¿ç”¨ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä»¥æ­¤ä¸ºåŸºç¡€é‡å†™äº§å“ç´¢å¼•ç³»ç»Ÿçš„ç»éªŒã€‚ç¬¬ä¸ƒèŠ‚æ˜¯ä¸€äº›ç›¸å…³è®¨è®ºå’Œæœªæ¥çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ç¼–ç¨‹æ¨¡å‹&#34;&gt;2 ç¼–ç¨‹æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;è®¡ç®—åˆ©ç”¨ä¸€ä¸ªè¾“å…¥é”®å€¼å¯¹é›†åˆï¼Œäº§å‡ºä¸€ä¸ªè¾“å‡ºé”®å€¼å¯¹ç»“åˆã€‚MapReduceåº“çš„ç”¨æˆ·å°†è®¡ç®—è¡¨ç¤ºä¸ºä¸¤ä¸ªå‡½æ•° &lt;code&gt;Map&lt;/code&gt;å’Œ&lt;code&gt;Reduce&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Map&lt;/code&gt;ï¼Œç”±ç”¨æˆ·ç¼–å†™ï¼Œå°†ä¸€ä¸ªé”®å€¼å¯¹ç”Ÿæˆä¸ºä¸€ç»„ä¸­é—´é”®å€¼å¯¹é›†åˆã€‚MapReduceåº“å°†æ‰€æœ‰å…·æœ‰ç›¸åŒå…³é”®è¯&lt;code&gt;I&lt;/code&gt;çš„ä¸­é—´valueè¿›è¡Œåˆ†ç»„ï¼Œç„¶åä¼ é€’ç»™Reduceå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Reduce&lt;/code&gt;å‡½æ•°ï¼ŒåŒæ ·ç”±ç”¨æˆ·ç¼–å†™ï¼Œæ¥å—ä¸€ä¸ªä¸­é—´key &lt;code&gt;I&lt;/code&gt;å’Œè¯¥keyç›¸å…³ çš„ä¸€ç»„valueã€‚å®ƒå°†è¿™äº›å€¼åˆå¹¶åˆ°ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå¯èƒ½æ›´å°çš„valueé›†åˆã€‚é€šå¸¸ä¸€ä¸ªReduceè°ƒç”¨åªäº§ç”Ÿä¸€ä¸ªæˆ–è€…é›¶ä¸ªè¾“å‡ºã€‚é€šè¿‡ä¸€ä¸ªè¿­ä»£å™¨æŠŠä¸­é—´valueæä¾›ç»™ç”¨æˆ·è‡ªå®šä¹‰çš„reduceå‡½æ•°ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¤„ç†å¤ªå¤§ä»¥è‡³äºå†…å­˜æ”¾ä¸ä¸‹çš„valueåˆ—è¡¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;21-example&#34;&gt;2.1 Example&lt;/h3&gt;
&lt;p&gt;è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œè®¡ç®—ä¸€ä¸ªå¤§è§„æ¨¡æ–‡æ¡£é›†åˆä¸­æ¯ä¸ªå•è¯çš„æ•°ç›®ã€‚ç”¨æˆ·å°†ç¼–å†™å’Œä¸‹é¢ä¼ªä»£ç ç±»ä¼¼çš„ç¨‹åº&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;map(String key, String value):
	// key: document name
	// value: document contents
	for each word w in value:
		EmitIntermediate(w, &amp;quot;1&amp;quot;);

reduce(String key, Iterator value):
	// key: a word
	// value: a list of counts
	int result = 0;
	for each v in value:
		result += ParseInt(v)
	Emit(AsString(result));
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;map&lt;/code&gt;å‡½æ•°ä¼šå‘å‡ºæ¯ä¸ªå•è¯ä»¥åŠç›¸å…³çš„å‡ºç°æ¬¡æ•°ã€‚&lt;code&gt;reduce&lt;/code&gt;å‡½æ•°å¯¹ä¸€ä¸ªç‰¹å®šå•è¯å‘å‡ºçš„æ¬¡æ•°è¿›è¡Œæ±‚å’Œã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·éœ€è¦ç¼–ç ç”¨è¾“å…¥è¾“å‡ºæ–‡ä»¶çš„åå­—å’Œå¯é€‰çš„è°ƒèŠ‚å‚æ•°æ¥å¡«å……ä¸€ä¸ªmapreduceè§„èŒƒï¼ˆ&lt;code&gt;mapreduce specification&lt;/code&gt;ï¼‰å¯¹è±¡ã€‚ç”¨æˆ·ä¹‹åè°ƒç”¨MapReduceå‡½æ•°ï¼Œä¼ é€’ç»™å®ƒè§„èŒƒå¯¹è±¡ã€‚ç”¨æˆ·çš„ä»£ç éœ€è¦å’ŒMapReduceåº“ï¼ˆC++å®ç°ï¼‰é“¾æ¥ã€‚é™„å½•AåŒ…å«è¿™ä¸ªä¾‹å­çš„å®Œæ•´ä»£ç ã€‚&lt;/p&gt;
&lt;h3 id=&#34;22-types&#34;&gt;2.2 Types&lt;/h3&gt;
&lt;p&gt;å°½ç®¡ä¹‹å‰çš„ä¼ªä»£ç ä½¿ç”¨çš„æ˜¯å­—ç¬¦ä¸²è¾“å…¥å’Œè¾“å‡ºï¼Œä½†æ˜¯ä»æ¦‚å¿µä¸Šè®²ï¼Œç”¨æˆ·æä¾›çš„mapå’Œreduceå‡½æ•°å…·æœ‰ç›¸å…³çš„ç±»å‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;map      (k1,v1)       -&amp;gt;list(k2,v2)
reduce   (k2,list(v2)) -&amp;gt;list(v2)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¾“å…¥çš„é”®å€¼å¯¹å’Œè¾“å‡ºçš„é”®å€¼å¯¹æ¥è‡ªä¸åŒçš„åŸŸã€‚ä½†æ˜¯ä¸­é—´é”®å€¼å¯¹å’Œè¾“å‡ºé”®å€¼å¯¹æ¥è‡ªç›¸åŒçš„åŸŸã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„C++å®ç°åœ¨ç”¨æˆ·å®ç°çš„å‡½æ•°ä¹‹é—´ä¼ é€’å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ç”¨æˆ·å¯ä»¥è‡ªè¡Œç¼–å†™ä»£ç å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºé€‚å½“çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;23-more-examples&#34;&gt;2.3 More Examples&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢æœ‰ä¸€äº›æœ‰è¶£çš„ç¨‹åºï¼Œå¯ä»¥å¾ˆè½»æ¾çš„ä½¿ç”¨MapReduceè®¡ç®—è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†å¸ƒå¼Grepï¼šmapå‡½æ•°å‘é€æ»¡è¶³ç‰¹å®šæ¨¡å¼çš„è¡Œã€‚reduceå‡½æ•°ä»…å°†ä¸­é—´æ•°æ®è¾“å‡ºã€‚&lt;/li&gt;
&lt;li&gt;ç»Ÿè®¡URLè®¿é—®é¢‘ç‡ï¼šmapå‡½æ•°å¤„ç†webé¡µé¢è¯·æ±‚çš„æ—¥å¿—ä¿¡æ¯ï¼Œå‘é€&lt;code&gt;&amp;lt;URL,1&amp;gt;&lt;/code&gt;ã€‚reduceå‡½æ•°å°†åŒä¸€ä¸ªURLçš„æ¬¡æ•°åŠ åˆ°ä¸€èµ·ï¼Œå¹¶å‘é€&lt;code&gt;&amp;lt;URL,total cnt&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åè½¬ç½‘ç»œé“¾æ¥å›¾ï¼šmapå‡½æ•°å¯¹&lt;code&gt;source&lt;/code&gt;é¡µé¢ä¸­çš„æ‰€æœ‰&lt;code&gt;target&lt;/code&gt;è¿æ¥è¾“å‡º&lt;code&gt;&amp;lt;target,source&amp;gt;&lt;/code&gt;ã€‚reduceå‡½æ•°å°†æŒ‡å®šURLç›¸å…³çš„tsource URLæ”¾åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œï¼Œè¿”å›&lt;code&gt;&amp;lt;URL,list(source)&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼æ’åºï¼šmapå‡½æ•°ä»recordä¸­æå–keyï¼Œç„¶åå‘é€&lt;code&gt;&amp;lt;key ,record&amp;gt;&lt;/code&gt;ã€‚reduceå‡½æ•°ä¸æ”¹å˜é”®å€¼å¯¹ã€‚è¿™ä¸ªè®¡ç®—ä¾èµ–äº4.1ä¸­ä»‹ç»çš„åˆ’åˆ†è®¾å¤‡(partitioning facilities  )å’Œ4.2ä¸­ä»‹ç»çš„æ’åº(ordering  )å±æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-å®ç°&#34;&gt;3 å®ç°&lt;/h2&gt;
&lt;p&gt;å¯èƒ½ä¼šæœ‰å¾ˆå¤šç§ä¸åŒçš„MapReduceå®ç°ã€‚æ­£ç¡®çš„é€‰æ‹©å–å†³äºç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œä¸€ç§å®ç°é€‚åˆäºå°å…±äº«å†…å­˜çš„æœºå™¨ï¼Œå¦ä¸€ç§å®ç°é€‚åˆäºå¤§NUMA å¤šå¤„ç†å™¨ï¼Œè¿˜æœ‰ä¸€ç§é€‚åˆæ›´å¤§çš„ç½‘ç»œæœºå™¨é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€èŠ‚ä»‹ç»ä¸€ç§å®ç°é€‚åˆäºè°·æ­Œå†…éƒ¨å¹¿æ³›åº”ç”¨çš„ç¯å¢ƒï¼Œä½¿ç”¨äº¤æ¢æœºè¿æ¥çš„å¤§è§„æ¨¡å•†ç”¨è®¡ç®—æœºé›†ç¾¤ã€‚åœ¨æˆ‘ä»¬çš„ç¯å¢ƒé‡Œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1) æœºå™¨é€šå¸¸æ˜¯x86åŒå¤„ç†å™¨ï¼Œè¿è¡ŒLinuxï¼Œå†…å­˜2-4GB&lt;/li&gt;
&lt;li&gt;(2) å•†ç”¨ç½‘ç»œç¡¬ä»¶ï¼Œé€šå¸¸100mb/s æˆ–è€… 1gb/s,ä½†æ˜¯å¹³å‡å°äºå…¨éƒ¨å¸¦å®½çš„ä¸€åŠã€‚&lt;/li&gt;
&lt;li&gt;(3) ä¸€ä¸ªé›†ç¾¤é€šå¸¸æœ‰æˆç™¾ä¸Šåƒå°æœºå™¨ï¼Œæ‰€ä»¥æœºå™¨æ•…éšœæ˜¯å¾ˆå¸¸è§çš„ã€‚&lt;/li&gt;
&lt;li&gt;(4) é€šè¿‡ç›´æ¥è¿æ¥åˆ°å•ä¸ªè®¡ç®—æœºçš„å»‰ä»·IDEç£ç›˜æä¾›å­˜å‚¨ã€‚ å†…éƒ¨å¼€å‘çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿç”¨äºç®¡ç†å­˜å‚¨åœ¨è¿™äº›ç£ç›˜ä¸Šçš„æ•°æ®ã€‚ æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨å¤åˆ¶åœ¨ä¸å¯é çš„ç¡¬ä»¶ä¸Šæä¾›å¯ç”¨æ€§å’Œå¯é æ€§ã€‚&lt;/li&gt;
&lt;li&gt;(5) ç”¨æˆ·å°†ä½œä¸šæäº¤åˆ°è°ƒåº¦ç³»ç»Ÿã€‚ æ¯ä¸ªä½œä¸šåŒ…å«ä¸€ç»„ä»»åŠ¡ï¼Œå¹¶ç”±è°ƒåº¦ç¨‹åºæ˜ å°„åˆ°é›†ç¾¤ä¸­çš„ä¸€ç»„å¯ç”¨è®¡ç®—æœº&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;31-execution-overview&#34;&gt;3.1 Execution Overview&lt;/h3&gt;
&lt;p&gt;é€šè¿‡è‡ªåŠ¨åˆ’åˆ†è¾“å…¥æ•°æ®åˆ°Mä¸ªsplitçš„é›†åˆï¼ŒMapè°ƒç”¨å¯ä»¥åˆ†å¸ƒåˆ°å¤šæ€æœºå™¨ä¸Šã€‚è¾“å…¥splitå¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šå¹¶è¡Œå¤„ç†ã€‚reduceè°ƒç”¨å®ç°åˆ†å¸ƒå¼æ˜¯é€šè¿‡ä¸€ä¸ªåˆ†å‰²å‡½æ•°å°†ä¸­é—´keyåˆ†å‰²ä¸ºRä»½ï¼ˆä¾‹å¦‚&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mspace&gt;&lt;/mspace&gt;&lt;mspace width=&#34;0.6666666666666666em&#34;/&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;m&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;o&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;mtext&gt;â€‰&lt;/mtext&gt;&lt;mtext&gt;â€‰&lt;/mtext&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;hash(key)\mod R&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mspace allowbreak&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.6666666666666666em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.69444em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathrm&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathrm&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;mord mathrm&#34;&gt;d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ï¼‰ã€‚åˆ†å‰²çš„æ€»æ•°å’Œåˆ†å‰²å‡½æ•°ç”±ç”¨æˆ·æŒ‡å®šã€‚&lt;/p&gt;
&lt;p&gt;å›¾ä¸€å±•ç¤ºäº†æˆ‘ä»¬çš„MapReduceå®ç°çš„æ•´ä½“æµç¨‹ã€‚å½“ç”¨æˆ·ç¨‹åºè°ƒç”¨MapReduceå‡½æ•°æ—¶ï¼Œä¼šå‘ç”Ÿä¸‹é¢ä¸€ç³»åˆ—æ“ä½œ(å›¾1ä¸Šçš„æ•°å­—æ ‡ç­¾å’Œä¸‹é¢çš„å¯¹åº”)&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://s1.ax1x.com/2020/08/18/duyRFf.png&#34; alt=&#34;å›¾ä¸€&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨æˆ·ç¨‹åºä¸­çš„MapReduceåº“é¦–å…ˆä¼šå°†è¾“å…¥æ•°æ®åˆ’åˆ†ä¸ºMä»½ï¼Œé€šå¸¸æ¯ä»½æ˜¯16Måˆ°64Mï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å‚æ•°æ¥è®¾ç½®ã€‚ç„¶ååœ¨é›†ç¾¤é‡Œå¯åŠ¨ç¨‹åºçš„å¤åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰ä¸€ä¸ªç¨‹åºçš„å¤åˆ¶æ˜¯ç‰¹æ®Šçš„â€”â€”&lt;code&gt;master&lt;/code&gt;ã€‚ä½™ä¸‹èŠ‚ç‚¹çš„å·¥ä½œæ˜¯ç”±è¿™ä¸ªèŠ‚ç‚¹åˆ†é…çš„ã€‚ä¸€å…±Mä¸ªmapä»»åŠ¡å’ŒRä¸ªreduceä»»åŠ¡éœ€è¦åˆ†é…ã€‚masteæŒ‘é€‰ç©ºé—²çš„workerï¼Œç„¶ååˆ†é…ç»™å®ƒä¸€å…±mapä»»åŠ¡æˆ–è€…ä¸€ä¸ªreduceä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªè¢«åˆ†é…äº†mapä»»åŠ¡çš„workerä¼šè¯»å–ç›¸åº”åˆ’åˆ†çš„è¾“å…¥æ•°æ®ã€‚å®ƒä¼šå°†è¾“å…¥æ•°æ®è§£æä¸ºé”®å€¼å¯¹ï¼Œç„¶åä¼ é€’ç»™ç”¨æˆ·å®šä¹‰çš„mapå‡½æ•°ã€‚mapå‡½æ•°ç”Ÿæˆä¸­é—´é”®å€¼å¯¹ï¼Œå¹¶ç¼“å­˜åˆ°å†…å­˜é‡Œã€‚&lt;/li&gt;
&lt;li&gt;å†…å­˜é‡Œçš„é”®å€¼å¯¹ä¼šå‘¨æœŸæ€§çš„å†™å…¥æœ¬åœ°ç£ç›˜ï¼Œå¹¶æœ‰åˆ†å‰²å‡½æ•°åˆ’åˆ†ä¸ºRä¸ªåŒºåŸŸã€‚æœ¬åœ°ç£ç›˜ä¸Šå†™å…¥çš„é”®å€¼å¯¹ä½ç½®ä¼šè¢«ä¼ å›ç»™masterï¼Œç„¶åmasterä¼ é€’ç»™reduce workerã€‚&lt;/li&gt;
&lt;li&gt;å½“ä¸€ä¸ªreduce workerè¢«masteré€šçŸ¥é”®å€¼å¯¹ä½ç½®ï¼Œå®ƒä¼šä½¿ç”¨è¿œç¨‹è°ƒç”¨å»è¯»å–è¿œç¨‹ç£ç›˜ä¸Šçš„ç”±mapç”Ÿæˆçš„æ•°æ®ã€‚å½“ä¸€ä¸ªreduce workerè¯»å–äº†æ‰€æœ‰çš„ä¸­é—´æ•°æ®ï¼Œå®ƒä¼šå°†æ‰€æœ‰çš„ä¸­é—´æ•°æ®æŒ‰ç…§keyè¿›è¡Œæ’åºï¼Œè¿™æ ·å…·æœ‰ç›¸åŒkeyçš„æ•°æ®å¯ä»¥åˆ†ç»„åˆ°ä¸€èµ·ã€‚æ’åºæ˜¯å¿…è¦çš„ï¼Œå› ä¸ºé€šå¸¸ä¼šæœ‰è®¸å¤šä¸åŒçš„keyæ˜ å°„åˆ°ä¸€ä¸ªreduceä»»åŠ¡ä¸Šã€‚å¦‚æœä¸­é—´æ•°æ®çš„æ•°é‡å¤ªå¤§ï¼Œéœ€è¦ä½¿ç”¨å¤–æ’åºã€‚&lt;/li&gt;
&lt;li&gt;reduce workeréå†æ’å¥½åºçš„ä¸­é—´æ•°æ®ï¼Œç„¶åå¯¹äºæ¯ä¸€ä¸ªkeyï¼Œä¼šå°†å¯¹åº”çš„keyå’Œvalueé›†åˆä¼ é€’ç»™ç”¨æˆ·çš„reduceå‡½æ•°ã€‚reduceå‡½æ•°çš„è¾“å‡ºä¼šæ·»åŠ åˆ°å½“å‰reduceåˆ’åˆ†çš„æœ€ç»ˆè¾“å‡ºæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;å½“æ‰€æœ‰çš„mapå’Œreduceä»»åŠ¡å®Œæˆï¼Œmasterä¼šå”¤é†’ç”¨æˆ·ç¨‹åºã€‚è¿™æ—¶ï¼Œç”¨æˆ·ç¨‹åºé‡Œçš„&lt;code&gt;Mapreduce&lt;/code&gt;è°ƒç”¨ä¼šè¿”å›éœ€è¦çš„ç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“æˆåŠŸå®Œæˆåï¼ŒMapReduceçš„è¾“å‡ºä¼šæ”¾åœ¨Rä¸ªè¾“å‡ºæ–‡ä»¶é‡Œã€‚é€šå¸¸ç”¨æˆ·å¹¶ä¸éœ€è¦å°†è¿™ä¸ªRä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œä»–ä»¬å¯ä»¥å°†è¿™äº›æ–‡ä»¶ä½œä¸ºå¦ä¸€ä¸ªMapReduceè°ƒç”¨çš„è¾“å…¥ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨å…¶ä»–å¯ä»¥å¤„ç†å¤šæ–‡ä»¶è¾“å…¥çš„åˆ†å¸ƒå¼åº”ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;32-master-data-structures&#34;&gt;3.2 Master Data Structures&lt;/h3&gt;
&lt;p&gt;masterä¿æŒä¸€äº›æ•°æ®ç»“æ„ã€‚å¯¹æ¯ä¸€ä¸ªmapä»»åŠ¡å’Œreduceä»»åŠ¡ï¼Œå®ƒå­˜å‚¨stateï¼ˆidleã€in-processing,completedï¼‰,å’Œå·¥ä½œæœºå™¨æ ‡è¯†ã€‚&lt;/p&gt;
&lt;p&gt;masteræ˜¯mapä»»åŠ¡å’Œreduceä»»åŠ¡ä¹‹é—´ä¼ é€’çš„ä¸­é—´æ–‡ä»¶çš„å¯¼ç®¡ã€‚å› æ­¤ï¼Œå¯¹æ¯ä¸€ä¸ªå®Œæˆçš„mapä»»åŠ¡ï¼Œmasterå­˜å‚¨mapäº§ç”Ÿçš„Rä¸ªä¸­é—´æ–‡ä»¶çš„ä½ç½®å’Œå¤§å°ã€‚å½“mapä»»åŠ¡å®Œæˆæ—¶éœ€è¦æ›´æ–°è¿™äº›ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ä¼šé€æ­¥æ¨é€åˆ° in-processçŠ¶æ€çš„reduceä»»åŠ¡çš„workerä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;33-fault-tolerance&#34;&gt;3.3 Fault Tolerance&lt;/h3&gt;
&lt;p&gt;MapReduceåº“çš„ç›®çš„æ˜¯åœ¨æˆåƒä¸Šä¸‡å°æœºå™¨ä¸Šå¤„ç†å¤§é‡æ•°æ®ï¼Œå› æ­¤å¿…é¡»ä¼˜é›…çš„å¤„ç†æœºå™¨é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;worker-failure&#34;&gt;worker Failure&lt;/h4&gt;
&lt;p&gt;masterä¼šå‘¨æœŸæ€§çš„pingæ¯ä¸€ä¸ªworkerã€‚å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°workerçš„å›å¤ï¼Œmasterä¼šå°†è¿™ä¸ªworkeræ ‡è®°ä¸ºfailed ã€‚æ¯ä¸€ä¸ªworkerå®Œæˆçš„mapä»»åŠ¡éƒ½ä¼šè¢«é‡è®¾ä¸ºåˆå§‹çš„idleçŠ¶æ€ï¼Œå› æ­¤å®ƒå¯ä»¥è¢«å®‰æ’ç»™å…¶ä»–workerã€‚åŒæ ·çš„ï¼Œå¦‚æœä¸€ä¸ªmapæˆ–è€…reduceä»»åŠ¡å¤±è´¥ï¼Œå®ƒä¹Ÿä¼šè¢«è®¾ç½®ä¸ºidleçŠ¶æ€ï¼Œç„¶åè¢«é‡æ–°è°ƒåº¦ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªå¤±è´¥æœºå™¨ä¸Šå®Œæˆçš„mapä»»åŠ¡éœ€è¦é‡æ–°æ‰§è¡Œï¼Œå› ä¸ºå®ƒçš„è¾“å‡ºå­˜å‚¨åœ¨å¤±è´¥æœºå™¨çš„æœ¬åœ°ç¡¬ç›˜ä¸Šï¼Œæ˜¯æ— æ³•è®¿é—®çš„ã€‚åœ¨ä¸€ä¸ªå¤±è´¥æœºå™¨ä¸Šå®Œæˆçš„reduceä»»åŠ¡éœ€è¦é‡æ–°æ‰§è¡Œï¼Œå› ä¸ºå®ƒçš„è¾“å‡ºå­˜å‚¨åœ¨å…¨å±€æ–‡ä»¶ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªmapä»»åŠ¡é¦–å…ˆåœ¨worker Aä¸Šæ‰§è¡Œç„¶ååœ¨workerBä¸Šæ‰§è¡Œï¼ˆå› ä¸ºAå¤±è´¥äº†ï¼‰ï¼Œæ‰€æœ‰çš„çš„reduce workerä¼šè¢«é€šçŸ¥é‡æ–°æ‰§è¡Œã€‚æ¯ä¸ªè¿˜æ²¡åœ¨worker Aä¸Šè¯»å–æ•°æ®çš„reduceä»»åŠ¡ä¼šåˆ°worker Bä¸Šè¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;MapReduceå¯¹å¤§è§„æ¨¡çš„workerå¤±è´¥æ˜¯æœ‰å¼¹æ€§çš„ã€‚æ¯”å¦‚ï¼Œæ‰§è¡Œä¸€ä¸ªMapReduceæ“ä½œæ—¶ï¼Œä¸€ä¸ªé›†ç¾¤çš„ç½‘ç»œç»´æŠ¤ä¼šå¯¼è‡´80å°æœºå™¨åœ¨ä¸€æ®µæ—¶é—´å†…æ— æ³•è®¿é—®ã€‚MapReduce masteråªéœ€è¦ç®€å•åœ°é‡æ–°æ‰§è¡Œä¸€ä¸‹ç”±é‚£äº›å¤±è´¥workeræ‰§è¡Œçš„ä»»åŠ¡ï¼Œç„¶åç»§ç»­å¤„ç†ï¼ŒçŸ¥é“å®ŒæˆMapReduceæ“ä½œã€‚&lt;/p&gt;
&lt;h4 id=&#34;master-failure&#34;&gt;Master Failure&lt;/h4&gt;
&lt;p&gt;å¾ˆå®¹æ˜“åšåˆ°å‘¨æœŸæ€§åœ°å°†ä¸Šè¿°masterçš„æ•°æ®ç»“æ„å­˜å‚¨åˆ°æ£€æŸ¥ç‚¹ã€‚å¦‚æœmasterä»»åŠ¡å¤±è´¥ï¼Œä¸€ä»½æ‹·è´ä¼šä»æœ€è¿‘çš„æ£€æŸ¥ç‚¹é‡æ–°å¼€å§‹ã€‚ç„¶è€Œï¼Œè€ƒè™‘åˆ°åªæœ‰ä¸€ä¸ªmasterèŠ‚ç‚¹ï¼Œå¤±è´¥æ˜¯ä¸å¤ªå¯èƒ½çš„ã€‚å› æ­¤æˆ‘ä»¬æœ€è¿‘çš„å®ç°ï¼Œåœ¨masterå¤±è´¥çš„æ—¶å€™ä¼šç»ˆæ­¢MapReduceç¨‹åºã€‚å®¢æˆ·ç«¯å¯ä»¥æ£€æŸ¥è¿™ä¸ªæ¡ä»¶ï¼Œæˆ–è€…é‡æ–°å°è¯•MapReduceæ“ä½œã€‚&lt;/p&gt;
&lt;h4 id=&#34;semantics-in-the-presence-of-failures&#34;&gt;Semantics in the Presence of Failures&lt;/h4&gt;
&lt;p&gt;å½“ç”¨æˆ·æä¾›çš„mapå’Œreduceå‡½æ•°æœ‰ç€ç¡®å®šçš„è¾“å‡ºæ—¶ï¼Œæˆ‘ä»¬çš„åˆ†å¸ƒå¼æ‰§è¡Œç»“æœä¼šå’Œæ•´ä¸ªç¨‹åºæ— é”™è¯¯æ‰§è¡Œçš„è¾“å‡ºç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿™ä¸ªå±æ€§çš„å®ç°ä¾èµ–äºmapå’Œreduceä»»åŠ¡è¾“å‡ºçš„åŸå­æ€§æäº¤ã€‚æ¯ä¸€ä¸ªæ‰§è¡Œä¸­çš„ä»»åŠ¡ä¼šå°†å…¶è¾“å‡ºå†™å…¥åˆ°ç§æœ‰å­˜å‚¨æ–‡ä»¶ä¸­ã€‚ä¸€ä¸ªreduceä»»åŠ¡äº§ç”Ÿä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªmapä»»åŠ¡äº§ç”Ÿmä¸ªæ–‡ä»¶ã€‚å½“ä¸€ä¸ªmapä»»åŠ¡å®Œæˆæ—¶ï¼Œworkerä¼šå‘é€ä¸€ä¸ªæ¶ˆæ¯åˆ°masterï¼Œè¿™ä¸ªæ¶ˆæ¯é‡ŒåŒ…å«Rä¸ªä¸´æ—¶æ–‡ä»¶çš„nameã€‚å¦‚æœmasteræ¥æ”¶åˆ°ä¸€ä¸ªä¸€ä¸ªå·²ç»å®Œæˆçš„mapä»»åŠ¡çš„ä¿¡æ¯ï¼Œå°†å¿½ç•¥è¿™æ¡ä¿¡æ¯ã€‚ç›¸åçš„ï¼Œmasterå°†è®°å½•ç€Rä¸ªæ–‡ä»¶çš„nameã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¸€ä¸ªreduceä»»åŠ¡å®Œæˆæ—¶ï¼Œreduce workerå°†åŸå­åœ°å°†ä¸´æ—¶æ–‡ä»¶é‡å‘½åä¸ºæœ€ç»ˆè¾“å‡ºæ–‡ä»¶ã€‚å¦‚æœåŒä¸€ä¸ªreduceä»»åŠ¡åœ¨è®¸å¤šæœºå™¨ä¸Šè¿è¡Œï¼Œé‡å‘½åè°ƒç”¨å°†è°ƒç”¨å¤šæ¬¡ã€‚æˆ‘ä»¬ä¾èµ–äºåŸºç¡€æ–‡ä»¶ç³»ç»Ÿæä¾›çš„åŸå­é‡å‘½åæ“ä½œæ¥ä¿è¯æœ€ç»ˆæ–‡ä»¶ç³»ç»ŸçŠ¶æ€ä»…åŒ…å«ä¸€ä¸ªreduceä»»åŠ¡äº§ç”Ÿçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„å¤§éƒ¨åˆ†mapå’Œreduceæ“ä½œæ˜¯ç¡®å®šæ€§çš„ï¼Œäº‹å®ä¸Šæˆ‘ä»¬çš„è¯­ä¹‰ç­‰ä»·äºä¸€ç³»åˆ—ä¸²è¡ŒåŒ–æ“ä½œï¼Œæ¥ä½¿å¾—ç¨‹åºå‘˜å¯ä»¥è½»æ¾åœ°æ€è€ƒç¨‹åºçš„è¡¨ç°ã€‚å½“mapå’Œreduceæ“ä½œæ˜¯ä¸ç¡®å®šçš„ï¼Œæˆ‘ä»¬æä¾›äº†è¾ƒå¼±ä½†æ˜¯ä»ç„¶åˆç†çš„è¯­ä¹‰ã€‚åœ¨ä¸ç¡®å®šæ“ä½œçš„æƒ…å†µä¸‹ï¼ŒæŸä¸€ç‰¹å®šreduceä»»åŠ¡&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;R_1&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;çš„è¾“å‡ºç­‰ä»·äºä¸ç¡®å®šç¨‹åºçš„æŸä¸ªä¸²è¡ŒåŒ–æ“ä½œçš„è¾“å‡ºã€‚ç„¶é¹…ï¼Œå¦ä¸€ä¸ªreduceä»»åŠ¡&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;R_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;çš„è¾“å‡ºå¯èƒ½ç”±äºä¸ç¡®å®šä»»åŠ¡æ‰§è¡Œé¡ºåºçš„ä¸åŒè€Œä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘mapä»»åŠ¡Må’Œreduceä»»åŠ¡&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;R_1,R_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8777699999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;çš„æƒ…å†µã€‚æˆ‘ä»¬è®¾å®š&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;e(R_i)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä¸ºå·²ç»æäº¤çš„&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;R_i&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.83333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;çš„æ‰§è¡Œ(æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªè¿™æ ·çš„æ‰§è¡Œ)ã€‚è¿™ä¸ªæ¯”è¾ƒå¼±çš„è¯­ä¹‰å‡ºç°,å› ä¸º&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;e(R_1)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä¹Ÿè®¸å·²ç»è¯»å–äº†ç”±Mçš„æ‰§è¡Œäº§ç”Ÿçš„è¾“å‡º,è€Œ&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;e(R_2)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä¹Ÿè®¸å·²ç»è¯»å–äº†ç”±Mçš„ä¸åŒæ‰§è¡Œäº§ç”Ÿçš„è¾“å‡º.&lt;/p&gt;
&lt;h3 id=&#34;34-locality&#34;&gt;3.4 Locality&lt;/h3&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„è®¡ç®—ç¯å¢ƒä¸­ï¼Œç½‘ç»œå¸¦å®½æ˜¯æ¯”è¾ƒçè´µçš„èµ„æºã€‚æˆ‘ä»¬é‡‡ç”¨å°†è¾“å…¥æ•°æ®ï¼ˆGFSç®¡ç†ï¼‰ä¿å­˜åˆ°ç»„æˆé›†ç¾¤çš„æœºå™¨çš„æœ¬åœ°ç£ç›˜ä¸Šæ¥èŠ‚çœå¸¦å®½ã€‚GFSå°†æ¯ä¸ªæ–‡ä»¶åˆ†å‰²ä¸º64MBå¤§å°çš„å—ï¼Œç„¶åæ¯ä¸ªå—å­˜å‚¨å¤šä¸ªæ‹·è´ï¼ˆé€šå¸¸3ä¸ªï¼‰åœ¨ä¸åŒçš„æœºå™¨ä¸Šã€‚MapReduce masterå°†è¾“å…¥æ–‡ä»¶çš„ä½ç½®ä½ç½®ä¿¡æ¯è€ƒè™‘åœ¨å†…ï¼Œå¹¶å°è¯•åœ¨åŒ…å«è¾“å…¥æ•°æ®çš„å‰¯æœ¬çš„æœºå™¨ä¸Šè¿›è¡Œmapä»»åŠ¡ã€‚å¦‚æœå¤±è´¥ï¼Œå®ƒå°†å°è¯•åœ¨è¯¥ä»»åŠ¡è¾“å…¥æ•°æ®çš„å‰¯æœ¬é™„è¿‘å®‰æ’mapä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸åŒ…å«æ•°æ®çš„è®¡ç®—æœºä½äºåŒä¸€ç½‘ç»œäº¤æ¢æœºçš„å·¥ä½œè®¡ç®—æœºä¸Šï¼‰ã€‚ åœ¨é›†ç¾¤ä¸­ç›¸å½“å¤§éƒ¨åˆ†çš„å·¥ä½œçº¿ç¨‹ä¸Šè¿è¡Œå¤§å‹MapReduceæ“ä½œæ—¶ï¼Œå¤§å¤šæ•°è¾“å…¥æ•°æ®éƒ½åœ¨æœ¬åœ°è¯»å–ï¼Œå¹¶ä¸”ä¸å ç”¨ç½‘ç»œå¸¦å®½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;35-task-granularity&#34;&gt;3.5 Task Granularity&lt;/h3&gt;
&lt;p&gt;å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å°†mapé˜¶æ®µç»†åˆ†ä¸ºMä»½ï¼Œå°†reduceé˜¶æ®µç»†åˆ†ä¸ºRä»½ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼ŒMRåº”è¯¥æ¯”workeræœºå™¨çš„æ•°é‡å¤§çš„å¤šã€‚æ¯ä¸ªworkeræ‰§è¡Œè®¸å¤šä¸åŒçš„ä»»åŠ¡å¯ä»¥æ”¹å–„åŠ¨æ€è´Ÿè½½å¹³è¡¡ï¼Œè¿˜å¯ä»¥ä½¿å¾—å¤±è´¥å¿«é€Ÿæ¢å¤ï¼šè¿™ä¸ªæœºå™¨ä¸Šçš„è®¸å¤šå·²ç»å®Œæˆçš„mapä»»åŠ¡å¯ä»¥è¢«åˆ†é…åˆ°æ‰€æœ‰å…¶ä»–çš„workeræœºå™¨ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼ŒMRçš„å¤§å°æ˜¯æœ‰èŒƒå›´çš„ï¼Œå› ä¸ºmasterå¿…é¡»åš&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;O(M+R)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;O&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.10903em;&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;æ¬¡è°ƒåº¦ï¼Œå¹¶å­˜å‚¨&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mo&gt;Ã—&lt;/mo&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;O(M\times R)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;O&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.10903em;&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;Ã—&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä¸ªçŠ¶æ€åœ¨å†…å­˜ä¸­ã€‚ï¼ˆå†…å­˜ä½¿ç”¨çš„å¸¸æ•°å› å­æ˜¯å¾ˆå°çš„ï¼Œä½†æ˜¯&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;M&lt;/mi&gt;&lt;mo&gt;Ã—&lt;/mo&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;O(M\times R)&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;O&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.10903em;&#34;&gt;M&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;Ã—&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; å—çŠ¶æ€ç”±å¤§çº¦æ¯ä¸ª map ä»»åŠ¡/reduce ä»»åŠ¡å¯¹ä¸€ä¸ªå­—èŠ‚ç»„æˆã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒRé€šå¸¸ç”±ç”¨æˆ·æŒ‡å®šï¼Œå› ä¸ºæ¯ä¸ªreduceä»»åŠ¡æœ€ç»ˆä¼šè¾“å‡ºå¤šä¸ªæ–‡ä»¶ã€‚åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å€¾å‘äºé€‰æ‹©Mä½¿å¾—æ¯ä¸€ä¸ªä»»åŠ¡åªéœ€è¦å¤„ç†16åˆ°64MBçš„è¾“å…¥æ•°æ®ï¼ˆè¿™æ ·ä¸Šè¿°çš„æœ¬åœ°åŒ–ä¼˜åŒ–æœ€æœ‰æ•ˆï¼‰ã€‚Ræ˜¯æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨çš„æœºå™¨æ•°é‡çš„ä¸€ä¸ªå°çš„å€æ•°ã€‚é€šå¸¸å¯¹äºä¸€ä¸ªMapReduceä»»åŠ¡ï¼Œæˆ‘ä»¬ä½¿ç”¨2000å°æœºå™¨ï¼ŒM = 200000ï¼ŒR = 5000&lt;/p&gt;
&lt;h3 id=&#34;36-backup-tasks&#34;&gt;3.6 Backup Tasks&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ªå¸¸è§çš„å¯¼è‡´MapReduceæ“ä½œæ€»æ—¶é•¿è¿‡é•¿çš„åŸå› æ˜¯&amp;quot;straggler&amp;quot;ï¼ˆè½åè€…ï¼‰ï¼šä¸€å°æœºå™¨å®Œæˆå°‘é‡çš„Mapæˆ–è€…Reduceä»»åŠ¡ä½†æ˜¯èŠ±è´¹äº†ä¸æ­£å¸¸çš„å¾ˆé•¿æ—¶é—´ã€‚è½åè€…çš„å‡ºç°å¯èƒ½æœ‰å¾ˆå¤šåŸå› ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç£ç›˜è¾£é¸¡çš„æœºå™¨ç»å¸¸ä¼šé‡åˆ°correctable errors  ï¼Œå¯¼è‡´è¯»å†™æ€§èƒ½ä»30MB/sé™åˆ°1MB/sã€‚é›†ç¾¤è°ƒåº¦å¯èƒ½ä¼šåœ¨è¿™å°æœºå™¨ä¸Šå®‰æ’å…¶ä»–ä»»åŠ¡ï¼Œè¿™å°±ä¼šå¯¼è‡´CPUã€ç£ç›˜ã€å†…å­˜ã€å¸¦å®½ç«äº‰ï¼Œä½¿å¾—æ‰§è¡ŒMapReduceä»£ç éå¸¸ç¼“æ…¢ã€‚æˆ‘ä»¬æœ€è¿‘é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæœºå™¨åˆå§‹åŒ–ä»£ç ä¸­çš„ä¸€ä¸ªbugå¯¼è‡´å¤„ç†å™¨ç¼“å­˜è¢«ç¦ç”¨ï¼Œå—å½±å“çš„æœºå™¨ä¸Šè®¡ç®—é€Ÿåº¦ä¸‹é™äº†ä¸€ç™¾å€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€ä¸ªé€šç”¨çš„æœºåˆ¶æ¥å‡è½»è½åè€…å¸¦æ¥çš„é—®é¢˜ã€‚å½“ä¸€ä¸ªMapReduceæ“ä½œæ¥è¿‘å®Œæˆæ—¶ï¼Œmasterä¼šè°ƒåº¦å…¶ä½™æ­£åœ¨è¿è¡Œä¸­çš„ä»»åŠ¡çš„å¤‡ä»½æ‰§è¡Œã€‚æ— è®ºæ˜¯ä¸»ä»»åŠ¡è¿˜æ˜¯å¤‡ä»½ä»»åŠ¡å®Œæˆï¼Œè¿™ä¸ªä»»åŠ¡éƒ½ä¼šè¢«æ ‡è®°ä¸ºå®Œæˆã€‚æˆ‘ä»¬å·²ç»å¯¹è¿™ä¸ªæœºåˆ¶è¿›è¡Œäº†è°ƒæ•´ï¼Œé€šå¸¸ï¼Œè®¡ç®—èµ„æºçš„å¢åŠ ä¸è¶…è¿‡ç™¾åˆ†ä¹‹å‡ ã€‚æˆ‘ä»¬å‘ç°è¿™å¯¹å‡å°å¤§å‹MapReduceæ“çºµçš„æ—¶é—´æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œ5.3ä¸­çš„æ’åºä»»åŠ¡åœ¨ç¦ç”¨å¤‡ä»½æœºåˆ¶çš„æ—¶å€™ï¼ŒèŠ±è´¹çš„æ—¶é—´ä¼šå¢é•¿44%ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-æŠ€å·§&#34;&gt;4 æŠ€å·§&lt;/h2&gt;
&lt;p&gt;å°½ç®¡å¯¹å¤§éƒ¨åˆ†éœ€æ±‚æ¥è¯´ï¼Œç¼–å†™mapå’Œreduceå‡½æ•°æä¾›çš„åŸºç¡€åŠŸèƒ½å·²ç»æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æˆ‘ä»¬æœ‰ä¸€äº›æœ‰ç”¨çš„æ‹“å±•ã€‚è¿™ä¸€èŠ‚å°†è¯´æ˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;41-partitioning-function&#34;&gt;4.1 Partitioning  Function&lt;/h3&gt;
&lt;p&gt;ç”¨æˆ·æŒ‡å®šreduceä»»åŠ¡çš„æ•°é‡Rã€‚åˆ†å‰²å‡½æ•°åŸºäºä¸­é—´keyå°†æ•°æ®åˆ†å‰²åˆ°è¿™äº›ä»»åŠ¡ä¸Šã€‚ä¸€ä¸ªé»˜è®¤çš„åˆ†å‰²å‡½æ•°æ˜¯ä½¿ç”¨hashï¼ˆä¾‹å¦‚&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mspace&gt;&lt;/mspace&gt;&lt;mspace width=&#34;0.6666666666666666em&#34;/&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;m&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;o&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;mtext&gt;â€‰&lt;/mtext&gt;&lt;mtext&gt;â€‰&lt;/mtext&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;hash(key)\mod R&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mspace allowbreak&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.6666666666666666em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.69444em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathrm&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathrm&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;mord mathrm&#34;&gt;d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ï¼‰ ã€‚è¿™å€¾å‘äºä¸€ä¸ªéå¸¸å…¬å¹³çš„åˆ’åˆ†ã€‚ç„¶é¹…åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨æŸäº›å…¶ä»–çš„å‡½æ•°åˆ’åˆ†æ•°æ®æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œæœ‰æ—¶è¾“å‡ºkeyæ˜¯URLï¼Œæˆ‘ä»¬å¸Œæœ›æŸä¸ªä¸»æœºçš„æ‰€æœ‰ç›¸å…³è®°å½•éƒ½åœ¨ä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸Šã€‚ä¸ºäº†æ”¯æŒè¿™ç§æƒ…å†µï¼Œç”¨æˆ·å¯ä»¥æä¾›ä¸€ä¸ªç‰¹æ®Šçš„åˆ’åˆ†å‡½æ•°ï¼Œæ¯”å¦‚ä½¿ç”¨&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mspace&gt;&lt;/mspace&gt;&lt;mspace width=&#34;0.6666666666666666em&#34;/&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;m&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;o&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;mtext&gt;â€‰&lt;/mtext&gt;&lt;mtext&gt;â€‰&lt;/mtext&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;hash(Hostname(urlkey))\mod R&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.08125em;&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;t&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.01968em;&#34;&gt;l&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03148em;&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mspace allowbreak&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.6666666666666666em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.69444em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathrm&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathrm&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;mord mathrm&#34;&gt;d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.00773em;&#34;&gt;R&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä½œä¸ºåˆ’åˆ†å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—åŒä¸€ä¸ªä¸»æœºçš„æ‰€æœ‰URLéƒ½åœ¨åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;42-ordering-guarantees&#34;&gt;4.2 Ordering Guarantees&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä¿è¯å¯¹äºä¸€ä¸ªç»™å®šçš„åˆ’åˆ†ï¼Œä¸­é—´é”®å€¼å¯¹ä¼šæŒ‰ç…§keyé€’å¢çš„é¡ºåºè¿›è¡Œå¤„ç†ã€‚è¿™æ ·çš„é¡ºåºä¿è¯å¯ä»¥ä½¿å¾—å¾ˆå®¹æ˜“ç”Ÿæˆä¸€ä¸ªæ’å¥½åºçš„è¾“å‡ºæ–‡ä»¶ï¼Œè¿™å¯¹è¾“å‡ºæ–‡ä»¶æ”¯æŒæŒ‰ç…§keyéšæœºè®¿é—®æ—¶å¾ˆæœ‰æ•ˆçš„ï¼Œæˆ–è€…æ˜¯è¾“å‡ºæ–‡ä»¶æ˜¯æ’åºå¥½çš„å¯¹ç”¨æˆ·å¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;h3 id=&#34;43-combiner-function&#34;&gt;4.3 Combiner Function&lt;/h3&gt;
&lt;p&gt;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¯ä¸ªmapä»»åŠ¡äº§ç”Ÿçš„ä¸­é—´keyä¼šæœ‰å¤§é‡é‡å¤ï¼Œç”¨æˆ·æŒ‡å®šçš„reduceå‡½æ•°æ˜¯å¯äº¤æ¢çš„å’Œå…³è”çš„ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯2.1èŠ‚ä¸­çš„å•è¯è®¡æ•°ä¾‹å­ã€‚å•è¯é¢‘ç‡ä¸€èˆ¬éµå¾ªé½å¤«(Zipf)åˆ†å¸ƒï¼Œæ¯ä¸€ä¸ªmapä»»åŠ¡ä¼šäº§ç”Ÿå¤§é‡çš„&lt;code&gt;&amp;lt;the,1&amp;gt;&lt;/code&gt;è®°å½•ã€‚æ‰€æœ‰çš„è¿™äº›è®°å½•ä¼šé€šè¿‡ç½‘ç»œå‘é€åˆ°ä¸€ä¸ªreduceå‡½æ•°ä¸­ï¼Œç„¶åç”±reduceå‡½æ•°åŠ åˆ°ä¸€èµ·äº§ç”Ÿä¸€ä¸ªæ•°å­—ã€‚æˆ‘ä»¬å…è®¸ç”¨æˆ·æŒ‡å®šä¸€ä¸ªCombinerå‡½æ•°ï¼Œåœ¨ç½‘ç»œå‘é€å‰å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºåˆå¹¶ã€‚&lt;/p&gt;
&lt;p&gt;Combinerå‡½æ•°ä¼šåœ¨æ¯ä¸ªè¿è¡Œmapä»»åŠ¡çš„æœºå™¨ä¸Šæ‰§è¡Œã€‚é€šå¸¸ï¼Œcombinerå’Œreduceå‡½æ•°çš„å®ç°ä»£ç æ˜¯ç›¸åŒçš„ã€‚reduceå‡½æ•°å’Œcombinerå‡½æ•°çš„å”¯ä¸€åŒºåˆ«æ˜¯ï¼ŒMapReduceåº“æ˜¯å¦‚ä½•å¤„ç†å‡½æ•°è¾“å‡ºçš„ã€‚combinerå‡½æ•°çš„è¾“å‡ºä¼šè¢«å†™å…¥åˆ°ä¸€ä¸ªä¸­é—´æ–‡ä»¶ä¸­ï¼Œç„¶åè¢«å‘é€ç»™ä¸€ä¸ªreduceä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†åŒºåˆå¹¶å¯¹ç‰¹å®šMapReduceæ“ä½œçš„åŠ é€Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ã€‚é™„å½•AåŒ…å«ä¸€ä¸ªä½¿ç”¨combinerçš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;44-input-and-output-types&#34;&gt;4.4 Input and Output Types&lt;/h3&gt;
&lt;p&gt;MapReduceåº“æ”¯æŒè¯»å–å¤šç§æ ¼å¼çš„è¾“å…¥æ•°æ®ã€‚ä¾‹å¦‚ï¼Œtextæ ¼å¼çš„è¾“å…¥ä¼šå°†æ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œkeyæ˜¯æ–‡ä»¶ä¸­çš„åç§»å€¼ï¼Œvalueæ˜¯æ¯ä¸€è¡Œçš„å†…å®¹ã€‚å¦ä¸€ä¸ªæ¯”è¾ƒå¸¸è§æ”¯æŒçš„æ ¼å¼æ˜¯æŒ‰ç…§keyæ’åºå¥½çš„é”®å€¼å¯¹åºåˆ—ã€‚æ¯ä¸€ä¸ªè¾“å…¥ç±»å‹çš„å®ç°çŸ¥é“å¦‚ä½•åˆ’åˆ†è¾“å…¥ä¸ºæœ‰æ„ä¹‰çš„rangeï¼Œä»¥ä¾¿mapä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªç®€å•çš„readeræ¥å£çš„å®ç°æ¥æ·»åŠ å¯¹ä¸€ä¸ªæ–°çš„è¾“å…¥ç±»å‹çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªreaderä¸ä¸€å®šä»æ–‡ä»¶ä¸­è¯»å–å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªä»æ•°æ®åº“è¯»å–è®°å½•æˆ–è€…ä»å†…å­˜ä¸­è¯»å–æ•°æ®ç»“æ„æ˜ å°„æ˜¯éå¸¸ç®€å•çš„ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ”¯æŒä¸€ç³»åˆ—è¾“å‡ºç±»å‹ã€‚æ·»åŠ æ–°çš„è¾“å‡ºç±»å‹æ˜¯å¾ˆç®€å•çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;45-side-effects&#34;&gt;4.5 Side-effects&lt;/h3&gt;
&lt;p&gt;åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒMapReduceçš„ç”¨æˆ·ä¼šå‘ç°å°†å®ƒä»¬çš„mapæˆ–è€…reduceæ“ä½œç”Ÿæˆè¾…åŠ©æ–‡ä»¶ä½œä¸ºé¢å¤–è¾“å‡ºå¾ˆæ–¹ä¾¿ã€‚æˆ‘ä»¬ä¾èµ–äºåº”ç”¨çš„writeræ¥ä¿è¯è¿™äº›side-effectçš„åŸå­æ€§å’Œå¹‚ç­‰æ€§ã€‚é€šå¸¸ï¼Œåº”ç”¨ä¼šå…ˆå†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œç„¶åç­‰å®ƒå…¨éƒ¨å®Œæˆå†åŸå­æ€§çš„é‡å‘½åæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸€ä¸ªä»»åŠ¡äº§ç”Ÿçš„å¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æä¾›åŸå­æ€§çš„ä¸¤é˜¶æ®µæäº¤ã€‚å› æ­¤ï¼Œè¾“å‡ºå¤šä¸ªæ–‡ä»¶çš„ä»»åŠ¡çš„è·¨æ–‡ä»¶ä¸€è‡´æ€§éœ€è¦æ˜¯ç¡®å®šæ€§çš„ã€‚è¿™ç§é™åˆ¶åœ¨å®è·µä¸­ä»æ¥ä¸æ˜¯é—®é¢˜&lt;/p&gt;
&lt;h3 id=&#34;46-skipping-bad-records&#34;&gt;4.6 Skipping Bad Records&lt;/h3&gt;
&lt;p&gt;æœ‰äº›æ—¶å€™å› ä¸ºç”¨æˆ·ä»£ç é‡Œçš„bugå¯¼è‡´mapæˆ–è€…reduceå‡½æ•°åœ¨æŸä¸ªè®°å½•ä¸Šå´©æºƒã€‚è¿™æ ·çš„bugä¼šé˜»æ­¢MapReduceä»»åŠ¡å®Œæˆã€‚é€šå¸¸çš„åšæ³•æ˜¯ä¿®å¤è¿™ä¸ªbugï¼Œä½†æ˜¯æœ‰æ—¶æ— æ³•ä¿®å¤ï¼Œè¿™ä¸ªbugå¯èƒ½åœ¨ç¬¬ä¸‰æ–¹åº“ä½ æ— æ³•æ›´æ”¹æºä»£ç ã€‚å¦å¤–ï¼Œæœ‰æ—¶ä½ éœ€è¦å¿½ç•¥æŸäº›è®°å½•ï¼Œä¾‹å¦‚åœ¨åœ¨æŸä¸ªå¤§æ•°æ®é›†ä¸Šè¿›è¡Œé™æ€åˆ†æã€‚æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¯é€‰çš„è¿è¡Œæ–¹å¼ï¼Œè®©MapReduceåº“å‘ç°å“ªäº›è®°å½•ä¼šå¯¼è‡´å´©æºƒï¼Œç„¶åè·³è¿‡è¿™äº›è®°å½•ï¼Œç»§ç»­è¿›è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸€ä¸ªworkerè¿›è¡Œä¼šæœ‰ä¸€ä¸ªä¿¡å·handleæ¥æ•è·æ®µé”™è¯¯å’Œæ€»çº¿é”™è¯¯ã€‚åœ¨è°ƒç”¨ä¸€ä¸ªç”¨æˆ·çš„Mapå’Œreduceæ“ä½œä¹‹å‰ï¼ŒMapReduceåº“å°†å‚æ•°çš„åºåˆ—å·å­˜å‚¨åˆ°å…¨å±€å˜é‡é‡Œã€‚å¦‚æœç”¨æˆ·ä»£ç äº§ç”Ÿä¸€ä¸ªä¿¡å·ï¼Œä¿¡å·handlerå‘é€ä¸€ä¸ªâ€œlast gaspâ€ UDP  åŒ…ï¼ŒåŒ…å«åºåˆ—å·ï¼Œåˆ°MapReducemasterä¸Šå½“masterå‘ç°åœ¨æŸä¸€ä¸ªè®°å½•ä¸Šæœ‰å¤šæ¬¡å¤±è´¥ï¼Œè¿™è¡¨æ˜åœ¨ä¸‹ä¸€æ¬¡é‡æ–°æ‰§è¡Œæ—¶åº”è¯¥è·³è¿‡è¿™æ¡è®°å½•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;47-local-execution&#34;&gt;4.7 Local Execution&lt;/h3&gt;
&lt;p&gt;mapã€reduceå‡½æ•°çš„debugé—®é¢˜å¾ˆæ£˜æ‰‹ã€‚å› ä¸ºå®é™…çš„è®¡ç®—æ˜¯åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸Šï¼Œé€šå¸¸ä¼šæœ‰å‡ åƒå°æœºå™¨ï¼Œæœ‰masteråŠ¨æ€åœ°åˆ†é…ä»»åŠ¡ã€‚ä¸ºäº†æ–¹ä¾¿debugå’Œå°è§„æ¨¡æµ‹è¯•ï¼Œæˆ‘ä»¬ä¸“é—¨åšäº†ä¸€ä¸ªå®ç°ï¼Œå¯ä»¥åœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰§è¡ŒMapReduceæ“ä½œã€‚ç”¨æˆ·æä¾›æ§åˆ¶ï¼Œè¿™æ ·è®¡ç®—å¯ä»¥é™åˆ¶åˆ°æŸä¸€ç‰¹å®šçš„mapä»»åŠ¡ä¸Šã€‚ç”¨æˆ·é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„æ ‡å¿—ä½è°ƒç”¨ä»–ä»¬çš„ç¨‹åºï¼Œç„¶åç®€å•åœ°ä½¿ç”¨ä»»ä½•ä»–ä»¬ä½¿ç”¨çš„debugæˆ–è€…æµ‹è¯•å·¥å…·ã€‚&lt;/p&gt;
&lt;h3 id=&#34;48-status-information&#34;&gt;4.8 Status Information&lt;/h3&gt;
&lt;p&gt;masterè¿è¡Œä¸€ä¸ªå†…éƒ¨HTTPæœåŠ¡å™¨ï¼Œå¹¶å¯¼å‡ºä¸€ç»„çŠ¶æ€é¡µä¾›äººç±»ä½¿ç”¨ã€‚çŠ¶æ€é¡µæ˜¾ç¤ºè®¡ç®—è¿›åº¦,åƒå¤šå°‘ä¸ªä»»åŠ¡å·²ç»å®Œæˆ,å¤šå°‘ä¸ªè¿˜åœ¨è¿è¡Œ,è¾“å…¥çš„å­—èŠ‚æ•°,ä¸­é—´æ•°æ®å­—èŠ‚æ•°,è¾“å‡ºå­—èŠ‚æ•°,å¤„ç†ç™¾åˆ†æ¯”,ç­‰ç­‰.è¿™ä¸ªé¡µä¹ŸåŒ…å«åˆ°æ ‡å‡†é”™è¯¯çš„é“¾æ¥,å’Œç”±æ¯ä¸ªä»»åŠ¡äº§ç”Ÿçš„æ ‡å‡†è¾“å‡ºçš„é“¾æ¥.ç”¨æˆ·å¯ä»¥æ ¹æ®è¿™äº›æ•°æ®é¢„æµ‹è®¡ç®—éœ€è¦èŠ±è´¹çš„æ—¶é—´,å’Œæ˜¯å¦éœ€è¦æ›´å¤šçš„èµ„æº.å½“è®¡ç®—æ¯”é¢„æœŸçš„è¦æ…¢å¾ˆå¤šçš„æ—¶å€™,è¿™äº›é¡µé¢ä¹Ÿå¯ä»¥è¢«ç”¨æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯è¿™æ ·.&lt;/p&gt;
&lt;p&gt;æ­¤å¤–,æœ€ä¸Šé¢çš„çŠ¶æ€é¡µæ˜¾ç¤ºå·²ç»æœ‰å¤šå°‘ä¸ªworkerå¤±è´¥äº†,å’Œå½“å®ƒä»¬å¤±è´¥çš„æ—¶å€™,é‚£ä¸ªmapå’Œreduceä»»åŠ¡æ­£åœ¨è¿è¡Œ.å½“è¯•å›¾è¯Šæ–­åœ¨ç”¨æˆ·ä»£ç é‡Œçš„bugæ—¶,è¿™ä¸ªä¿¡æ¯ä¹Ÿæ˜¯æœ‰ç”¨çš„.&lt;/p&gt;
&lt;h3 id=&#34;49-counters&#34;&gt;4.9 Counters&lt;/h3&gt;
&lt;p&gt;MapReduceåº“æä¾›ä¸€ä¸ªè®¡æ•°å™¨æ¥è®¡ç®—å„ç§æ—¶é—´çš„å‘ç”Ÿæ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·æƒ³è¦ç»Ÿè®¡æ‰€æœ‰å•è¯å¤„ç†çš„æ¬¡æ•°æˆ–è€…å¾·è¯­æ–‡æ¡£è¢«ç´¢å¼•çš„æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œç”¨æˆ·éœ€è¦åˆ›å»ºä¸€ä¸ªå‘½åè®¡æ•°å™¨å¯¹è±¡ï¼Œç„¶ååœ¨mapæˆ–è€…reduceå‡½æ•°é‡Œé€‚å½“çš„å¢åŠ æŠ€æœ¯ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Counter* uppercase;
uppercase = GetCounter(&amp;quot;uppercase&amp;quot;);

map(String name, String contents):
	for each word w in contents:
		if (IsCapitalized(w)):
			uppercase-&amp;gt;Increment();
		EmitIntermediate(w, &amp;quot;1&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¯å°workeræœºå™¨ä¸Šçš„è®¡æ•°å€¼éƒ½ä¼šå‘¨æœŸæ€§åœ°å‘é€åˆ°masterä¸Šï¼ˆä¾é™„åœ¨pingå›åº”ä¸Šï¼‰ã€‚masterä»æˆåŠŸçš„mapå’Œreduceä»»åŠ¡é‡Œç»Ÿè®¡è®¡æ•°å€¼ï¼Œç„¶åå½“MapReduceä»»åŠ¡å®Œæˆæ—¶è¿”å›ç»™ç”¨æˆ·ä»£ç ã€‚å½“å‰è®¡æ•°å€¼ä¹Ÿä¼šåœ¨masterçš„çŠ¶æ€é¡µä¸Šå±•ç¤ºï¼Œè¿™æ ·äººç±»å¯ä»¥è§‚å¯Ÿè®¡ç®—è¿‡ç¨‹ã€‚å½“ç»Ÿè®¡è®¡æ•°å€¼çš„æ—¶å€™ï¼Œmasterä¼šåŒä¸€ä¸ªmap/reduceä»»åŠ¡å¤šæ¬¡æ‰§è¡Œçš„å½±å“ï¼Œé¿å…é‡å¤è®¡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;éƒ¨åˆ†è®¡æ•°å€¼ä¼šè¢«MapReduceåº“è‡ªåŠ¨ç»´æŠ¤ï¼Œæ¯”å¦‚è¾“å…¥è¾“å‡ºçš„é”®å€¼å¯¹æ•°&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ä¼šå‘ç°ï¼Œå¯¹MapReduceæ“ä½œçš„åˆç†æ€§æ£€æŸ¥(sanity checking)æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨æŸäº›MapReduceæ“ä½œä¸­ï¼Œç”¨æˆ·ä»£ç å¯èƒ½æƒ³è¦ä¿è¯è¾“å‡ºçš„é”®å€¼å¯¹æ•°ç­‰äºè¾“å…¥çš„é”®å€¼å¯¹æ•°ï¼Œæˆ–è€…æ˜¯å¤„ç†çš„å¾·è¯­æ–‡æ¡£åœ¨ä¸€ä¸ªåˆç† çš„æ¯”ä¾‹ä¹‹å†…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5-æ€§èƒ½&#34;&gt;5 æ€§èƒ½&lt;/h2&gt;
&lt;p&gt;ä¸¤ä¸ªå®ä¾‹çš„benchmarkï¼Œç•¥&lt;/p&gt;
&lt;h2 id=&#34;6-ç»éªŒ&#34;&gt;6 ç»éªŒ&lt;/h2&gt;
&lt;p&gt;å¹äº†ä¸€ç‚¹MapReduceçš„ç”¨é€”å’Œæ€§èƒ½ï¼Œç•¥&lt;/p&gt;
&lt;h2 id=&#34;7-ç›¸å…³å·¥ä½œ&#34;&gt;7 ç›¸å…³å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;ç•¥&lt;/p&gt;
&lt;h2 id=&#34;a-å•è¯é¢‘ç‡ç»Ÿè®¡&#34;&gt;A å•è¯é¢‘ç‡ç»Ÿè®¡&lt;/h2&gt;
&lt;p&gt;æœ¬èŠ‚åŒ…å«äº†ä¸€ä¸ªå®Œæ•´çš„ç¨‹åº,ç”¨äºç»Ÿè®¡åœ¨ä¸€ç»„å‘½ä»¤è¡ŒæŒ‡å®šçš„è¾“å…¥æ–‡ä»¶ä¸­,æ¯ä¸€ä¸ªä¸åŒçš„å•è¯å‡ºç°é¢‘ç‡.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;quot;mapreduce/mapreduce.h&amp;quot;
// Userâ€™s map function
class WordCounter : public Mapper {
public:
	virtual void Map(const MapInput&amp;amp; input) {
		const string&amp;amp; text = input.value();
		const int n = text.size();
		for (int i = 0; i &amp;lt; n; ) {
			// è·³è¿‡å¼€å§‹æ—¶çš„ç©ºç™½
			while ((i &amp;lt; n) &amp;amp;&amp;amp; isspace(text[i]))
				i++;
			// æŸ¥æ‰¾å•è¯ç»“å°¾
			int start = i;
			while ((i &amp;lt; n) &amp;amp;&amp;amp; !isspace(text[i]))
				i++;
			if (start &amp;lt; i)
				Emit(text.substr(start,i-start),&amp;quot;1&amp;quot;);
		}
	}
};
REGISTER_MAPPER(WordCounter);

// Userâ€™s reduce function
class Adder : public Reducer {
	virtual void Reduce(ReduceInput* input) {
		// éå†æ‰€æœ‰ç›¸åŒkeyçš„æ¡ç›®ï¼Œç„¶åæŠŠå€¼åŠ åˆ°ä¸€èµ·
		int64 value = 0;
		while (!input-&amp;gt;done()) {
			value += StringToInt(input-&amp;gt;value());
			input-&amp;gt;NextValue();
		}
		// Emit sum for input-&amp;gt;key()
		Emit(IntToString(value));
	}
};
REGISTER_REDUCER(Adder);

int main(int argc, char** argv) {
	ParseCommandLineFlags(argc, argv);
	MapReduceSpecification spec;
	// å°†è¾“å…¥æ–‡ä»¶åˆ—è¡¨å­˜å‚¨åˆ° &amp;quot;spec&amp;quot;
	for (int i = 1; i &amp;lt; argc; i++) {
		MapReduceInput* input = spec.add_input();
		input-&amp;gt;set_format(&amp;quot;text&amp;quot;);
		input-&amp;gt;set_filepattern(argv[i]);
		input-&amp;gt;set_mapper_class(&amp;quot;WordCounter&amp;quot;);
	}
	// æŒ‡å®šè¾“å‡ºæ–‡ä»¶:
	// /gfs/test/freq-00000-of-00100
	// /gfs/test/freq-00001-of-00100
	// ...
	MapReduceOutput* out = spec.output();
	out-&amp;gt;set_filebase(&amp;quot;/gfs/test/freq&amp;quot;);
	out-&amp;gt;set_num_tasks(100);
	out-&amp;gt;set_format(&amp;quot;text&amp;quot;);
	out-&amp;gt;set_reducer_class(&amp;quot;Adder&amp;quot;);
	// å¯é€‰é¡¹ï¼šå±€éƒ¨æ±‚å’ŒèŠ‚çœå¸¦å®½
	out-&amp;gt;set_combiner_class(&amp;quot;Adder&amp;quot;);
	// Tuning parameters: use at most 2000
	// machines and 100 MB of memory per task
	spec.set_machines(2000);
	spec.set_map_megabytes(100);
	spec.set_reduce_megabytes(100);
	// Now run it
	MapReduceResult result;
	if (!MapReduce(spec, &amp;amp;result)) abort();
	// Done: â€™resultâ€™ structure contains info
	// about counters, time taken, number of
	// machines used, etc.
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;
"> MapReduce éƒ¨åˆ†ç¿»è¯‘</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://codemogg.cn/post/I4i9VdugM/"" data-c="
          &lt;h2 id=&#34;n2&#34;&gt;&lt;a href=&#34;https://ac.nowcoder.com/acm/contest/6765#question&#34;&gt;N2&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;è®¾å·¦å³åŠå¾„ä¸º&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;r_1,r_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;åˆ™çº¢è‰²éƒ¨åˆ†é¢ç§¯ä¸º&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;Ï€&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;msup&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msubsup&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msubsup&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;Ï€&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\frac{\pi}{2}[(r_1+r_2)^2 -r_1^2-r_2^2] = \pi r_1r_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.095em;vertical-align:-0.345em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.695392em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;Ï€&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.064108em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8141079999999999em;&#34;&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.0622159999999998em;vertical-align:-0.24810799999999997em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8141079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.4518920000000004em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.24810799999999997em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.064108em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8141079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.4518920000000004em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.24810799999999997em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.03588em;&#34;&gt;Ï€&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;r_1+r_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.73333em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä¸ºå®šå€¼æ—¶ï¼Œå½“&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;r_1=r_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;æ—¶ï¼Œçº¢è‰²éƒ¨åˆ†é¢ç§¯æœ€å¤§&lt;/p&gt;
&lt;p&gt;åè¿‡æ¥çº¢è‰²éƒ¨åˆ†é¢ç§¯ä¸ºå®šå€¼æ—¶ï¼Œå½“&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;r_1=r_2&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.02778em;&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;æ—¶ï¼Œå¤§åœ†åŠå¾„æœ€å°ï¼Œä¸º&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;msqrt&gt;&lt;mfrac&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;Ï€&lt;/mi&gt;&lt;/mfrac&gt;&lt;/msqrt&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;2\sqrt{\frac{s}{\pi}}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.24em;vertical-align:-0.37980400000000003em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;mord sqrt&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.860196em;&#34;&gt;&lt;span class=&#34;svg-align&#34; style=&#34;top:-3.2em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.2em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34; style=&#34;padding-left:1em;&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.695392em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;Ï€&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.820196em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3.2em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;hide-tail&#34; style=&#34;min-width:1.02em;height:1.28em;&#34;&gt;&lt;svg width=&#39;400em&#39; height=&#39;1.28em&#39; viewBox=&#39;0 0 400000 1296&#39; preserveAspectRatio=&#39;xMinYMin slice&#39;&gt;&lt;path d=&#39;M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z&#39;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.37980400000000003em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;cmath&amp;gt;
using namespace std;

const double pi = acos(-1);

int main(int argc, char* argv[])
{
    double n;
    cin &amp;gt;&amp;gt; n;
    printf(&amp;quot;%.3lf&amp;quot;, 2.0 * sqrt(n / pi));
}

&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;n1&#34;&gt;&lt;a href=&#34;https://ac.nowcoder.com/acm/contest/6766#question&#34;&gt;N1&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;è¿™é¢˜æ¨èµ·æ¥è¿˜æŒºéº»çƒ¦çš„&lt;/p&gt;
&lt;p&gt;å…ˆæ¨ç¬¬ä¸€è½®ï¼Œé»‘çƒçš„æ•°ç›®æœ‰ä¸‰ç§æƒ…å†µ&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;n-1,n,n+1&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.66666em;vertical-align:-0.08333em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8388800000000001em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.64444em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;å¯¹åº”çš„æ¦‚ç‡ä¸º&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\frac{n(1-p)}{n+m+1},\frac{(n+1)p + (m+1)(1-p)}{n+m+1},\frac{mp}{n+m+1}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.413331em;vertical-align:-0.403331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.01em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.485em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.01em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.485em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.7475em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.446108em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ï¼Œæ‰€ä»¥ç¬¬ä¸€è½®é»‘çƒçš„æœŸæœ›æ˜¯&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\frac{(m+n)(p+n)}{n+m+1}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.413331em;vertical-align:-0.403331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.01em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.485em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç›¸åº”çš„æˆ‘ä»¬å¯ä»¥æ¨å‡ºè“çƒæœŸæœ›&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\frac{(m+n)(m+1-p)}{n+m+1}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.413331em;vertical-align:-0.403331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.01em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.485em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ä¸éš¾å‘ç°ä¸¤ç§æœŸæœ›çš„å’Œæ˜¯n+mï¼Œæ‰€ä»¥çƒçš„æ€»æ•°æ˜¯ä¸ä¼šå˜çš„ &lt;s&gt;ï¼ˆåºŸè¯ï¼‰&lt;/s&gt;  ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ç¬¬&lt;code&gt;i&lt;/code&gt;è½®é»‘çƒçš„æ•°ç›®ä¸º&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;n_i,n_0=n&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.625em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.30110799999999993em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.43056em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; ï¼Œé‚£ä¹ˆ&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;n_i = x(p+n_{i-1})&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.311664em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.208331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; ï¼Œå…¶ä¸­&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;x = \frac{m+n}{m+n+1}&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.43056em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.205662em;vertical-align:-0.403331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.802331em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä¸ºå®šå€¼&lt;/p&gt;
&lt;p&gt;å‰©ä¸‹çš„å°±ä¸éš¾æ¨äº†ï¼Œæ‹†å¼€å°±æ˜¯&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;n_i = xp\frac{1-x^i}{1-x} + nx^i&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.58056em;vertical-align:-0.15em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.31166399999999994em;&#34;&gt;&lt;span style=&#34;top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.15em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1.428791em;vertical-align:-0.403331em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.0254599999999998em;&#34;&gt;&lt;span style=&#34;top:-2.655em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mbin mtight&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.9020857142857143em;&#34;&gt;&lt;span style=&#34;top:-2.931em;margin-right:0.07142857142857144em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size3 size1 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.403331em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.824664em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;msupsub&#34;&gt;&lt;span class=&#34;vlist-t&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.824664em;&#34;&gt;&lt;span style=&#34;top:-3.063em;margin-right:0.05em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;#include &amp;lt;iostream&amp;gt;
using namespace std;
typedef long long ll;
const ll mod = 1e9 + 7;

ll qp(ll a, ll b)
{
    ll res = 1;
    while (b)
    {
        if (b &amp;amp; 1) res = (res * a) % mod;
        a = (a * a) % mod;
        b &amp;gt;&amp;gt;= 1;
    }
    return res;
}

int main(int argc, char* argv[])
{
    ll n, m, k, a, b;
    cin &amp;gt;&amp;gt; n &amp;gt;&amp;gt; m &amp;gt;&amp;gt; k &amp;gt;&amp;gt; a &amp;gt;&amp;gt; b;
    ll x = ((n + m) * qp(n + m + 1, mod - 2)) % mod;
    ll p = a * qp(b, mod - 2) % mod;
    ll xk = qp(x, k);
    cout &amp;lt;&amp;lt; (p * (n + m - (n + m) * qp(x, k) % mod + mod) + xk * n) % mod;
}

&lt;/code&gt;&lt;/pre&gt;
">ç‰›å®¢ç­‰çº§ä¹‹é¢˜ (8.3åœº)</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://codemogg.cn/post/gEGl4gH-j/"" data-c="
          &lt;h2 id=&#34;1524-å’Œä¸ºå¥‡æ•°çš„å­æ•°ç»„æ•°ç›®&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/number-of-sub-arrays-with-odd-sum/&#34;&gt;1524. å’Œä¸ºå¥‡æ•°çš„å­æ•°ç»„æ•°ç›®&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å‰ç¼€å’Œï¼Œå¦‚æœå½“å‰å’Œä¸ºå¥‡æ•°ï¼Œç­”æ¡ˆåŠ ä¸Šå‰é¢ä¸ºå¶æ•°çš„ä¸ªæ•°ï¼Œåä¹‹äº¦ç„¶ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int numOfSubarrays(vector&amp;lt;int&amp;gt;&amp;amp; arr) {
    const int mod = 1e9 + 7;
    int a = 0, b = 1, res = 0, sum = 0;
    for (int i = 0; i &amp;lt; arr.size(); ++i)
    {
        sum += arr[i];
        if (sum &amp;amp; 1)
        {
            res += b;
            a++;
        }
        else
        {
            res += a;
            b++;
        }
        res %= mod;
    }
    return res;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;1525-å­—ç¬¦ä¸²çš„å¥½åˆ†å‰²æ•°ç›®&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/number-of-good-ways-to-split-a-string/&#34;&gt;1525. å­—ç¬¦ä¸²çš„å¥½åˆ†å‰²æ•°ç›®&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;è¿™ä¹Ÿæ²¡å•¥è¯´çš„ï¼Œæ­£åç»Ÿè®¡ä¸€éå°±è¡Œ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;vector&amp;lt;int&amp;gt; cnt(const string&amp;amp; s)
{
    set&amp;lt;char&amp;gt;cs;
    vector&amp;lt;int&amp;gt; res(s.size(), 0);

    for (int i = 0; i &amp;lt; s.size(); ++i)
    {
        cs.insert(s[i]);
        res[i] = cs.size();
    }
    return res;
}

int numSplits(string s) {
    vector&amp;lt;int&amp;gt; n1 = cnt(s);
    reverse(s.begin(), s.end());
    vector&amp;lt;int&amp;gt; n2 = cnt(s);
    int res = 0, n = s.size();
    for (int i = 0; i &amp;lt; n - 1; ++i)
    {
        res += n1[i] == n2[n - i - 2];
    }
    return res;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;1526-å½¢æˆç›®æ ‡æ•°ç»„çš„å­æ•°ç»„æœ€å°‘å¢åŠ æ¬¡æ•°&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/minimum-number-of-increments-on-subarrays-to-form-a-target-array/&#34;&gt;1526. å½¢æˆç›®æ ‡æ•°ç»„çš„å­æ•°ç»„æœ€å°‘å¢åŠ æ¬¡æ•°&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æ•°ç»„çš„å˜åŒ–è¶‹åŠ¿æ˜¯&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mo&gt;â†—&lt;/mo&gt;&lt;mo&gt;â†˜&lt;/mo&gt;&lt;mo&gt;â†—&lt;/mo&gt;&lt;mo&gt;â†˜&lt;/mo&gt;&lt;mo&gt;â‹¯&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\nearrow\searrow\nearrow\searrow\cdots&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8888799999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;â†—&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8888799999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;â†˜&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8888799999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;â†—&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.8888799999999999em;vertical-align:-0.19444em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;â†˜&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:0.31em;vertical-align:0em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;â‹¯&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ï¼Œæ˜¾ç„¶æœ€å°æ¬¡æ•°æ˜¯æ³¢å³°-æ³¢è°·ï¼Œå¯¹ç¬¬ä¸€æ®µæ¥è¯´æ³¢è°·æ˜¯0ï¼Œå¯¹åé¢æ¥è¯´æ˜¯è¡”æ¥å¤„çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ‰¾æ³¢å³°æ³¢è°·æ¯”è¾ƒéº»çƒ¦ï¼Œäº‹å®ä¸Šæˆ‘ä»¬åªéœ€è¦å¯¹ä¸Šå‡é˜¶æ®µçš„å·®å€¼æ±‚å’Œå³å¯ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int minNumberOperations(vector&amp;lt;int&amp;gt;&amp;amp; target) {
    int res = target[0];
    for (int i = 1; i &amp;lt; target.size(); ++i)
    {
        res += max(0, target[i] - target[i - 1]);
    }
    return res;
}
&lt;/code&gt;&lt;/pre&gt;
">LeetCode ç¬¬ 31 åœºåŒå‘¨èµ›</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://codemogg.cn/post/leetcode-199/"" data-c="
          &lt;p&gt;è‡ªä»å®ä¹ è·‘è·¯ä¹‹åï¼Œæœ€è¿‘åˆå¼€å§‹æ‘¸äº†èµ·æ¥ï¼ˆxï¼‰&lt;/p&gt;
&lt;p&gt;å®ä¹ å·¥èµ„æ¢äº†æ–°ç”µè„‘ï¼Œçˆ½äº†ä¸€ä¸ªæœˆä¹‹åè¿›å…¥è´¤è€…æ—¶é—´ï¼Œæ— èŠå°±å¼€å§‹åˆ·åˆ·é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ‡’å¾—åœ¨æ–°ç”µè„‘ä¸Šé…ä¸€éhexoï¼Œä¹‹å‰çš„åšå®¢å°±è¿™æ ·æ‰”äº†å§ã€‚ç¿»äº†ç¿»å›½å†…çš„åšå®¢ç½‘ç«™ï¼ŒCSDNå±‘ï¼Œåšå®¢å›­æœ‰ç‚¹éº»çƒ¦ï¼Œç‰›å®¢ä¸‘ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‘æ¥æŒ‘å»è¿˜æ˜¯å†³å®šç”¨gridea+gitpageï¼Œä¹‹å‰çš„åšå®¢æœ‰æ—¶é—´è¡¥ä¸€è¡¥å§ã€‚&lt;/p&gt;
&lt;p&gt;åŠ›æ‰£å‘¨èµ›è€æ˜¯å¿˜è®°æ‰“ï¼Œå¹³æ—¶è¡¥è¡¥é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;cfæ—¶é—´ç‚¹ä¸å¤ªå¥½ï¼Œåœ¨å®¶å¤ªæ™šä¸æ–¹ä¾¿å¼€ç¯ï¼Œå…ˆè¡¥é¢˜ï¼Œå¼€å­¦å†æ‰“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1528-é‡æ–°æ’åˆ—å­—ç¬¦ä¸²&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/shuffle-string/&#34;&gt;1528. é‡æ–°æ’åˆ—å­—ç¬¦ä¸²&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æ°´é¢˜&lt;/p&gt;
&lt;h2 id=&#34;1529-ç¯æ³¡å¼€å…³-iv&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/bulb-switcher-iv/&#34;&gt;1529. ç¯æ³¡å¼€å…³ IV&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸²1ç¿»è½¬å‡ºæ¥å’Œä¸€ä¸ª1æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å§‹çš„0ä¸ç”¨è€ƒè™‘ï¼Œå­˜ä¸å­˜åœ¨éƒ½ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;101010...&lt;/code&gt;è¿™æ ·çš„å­—ç¬¦ä¸²æ¥è¯´ï¼Œåªéœ€è¦&lt;code&gt;2n&lt;/code&gt;æ¬¡ï¼Œnæ˜¯1çš„ä¸ªæ•°ã€‚å¦‚æœæœ€åæ˜¯1ä¸æ˜¯0çš„è¯å‡ä¸€ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int minFlips(string target) {
    int res = 0;
    bool out = true;
    for (size_t i = 0; i &amp;lt; target.size(); ++i)
    {
        if(target[i] == &#39;1&#39; &amp;amp;&amp;amp; out)
        {
            out = false;
            res++;
        }
        else if(target[i] == &#39;0&#39;)
        {
            out = true;
        }
    }
    return  res * 2 - 1 + (*target.rbegin() == &#39;0&#39;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;1530-å¥½å¶å­èŠ‚ç‚¹å¯¹çš„æ•°é‡&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/number-of-good-leaf-nodes-pairs/&#34;&gt;1530. å¥½å¶å­èŠ‚ç‚¹å¯¹çš„æ•°é‡&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æ¯”è¾ƒæ˜æ˜¾çš„æ ‘å½¢dpã€‚è®°å½•ä¸€ä¸‹è·ç¦»å½“å‰èŠ‚ç‚¹curè·ç¦»ä¸ºxçš„ï¼ˆå­æ ‘ä¸Šçš„ï¼‰å¶å­ç»“ç‚¹ä¸ªæ•°ï¼Œç„¶åå·¦å­©å­å’Œå³å­©å­è·ç¦»å’Œå°äºdistanceçš„è®°å½•ä¸€ä¸‹å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å‘çš„æ˜¯èŠ‚ç‚¹çš„valæ˜¯æœ‰é‡å¤çš„ï¼Œéœ€è¦å­—èŠ‚å†è®¡ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é¢˜å¯ä»¥æ”¹é€ ä¸€ä¸‹ï¼ŒäºŒå‰æ ‘æ”¹æˆå¤šå‰ï¼ˆ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int cnt[2048][16];
int tot,res;
// Return node id after reordering
int dfs(TreeNode* root, int distance)
{
    ++tot;
    int cur = tot;
    int l = 0, r = 0;
    if (root-&amp;gt;left)l = dfs(root-&amp;gt;left, distance);
    if (root-&amp;gt;right)r = dfs(root-&amp;gt;right, distance);
    if (l == 0 &amp;amp;&amp;amp; r == 0) cnt[cur][0]++;
    for (int i = 1; i &amp;lt; 16; ++i)
    {
        cnt[cur][i] += cnt[l][i - 1] + cnt[r][i - 1];
    }
    for (int i = 1; i &amp;lt; distance; ++i)
    {
        for (int j = 1; j &amp;lt;= distance - i; ++j)
        {
            res += cnt[l][i-1] * cnt[r][j-1];
        }
    }
    return cur;
}
int countPairs(TreeNode* root, int distance) {
    res = 0; tot = 0;
    dfs(root, distance);
    return res;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;1531-å‹ç¼©å­—ç¬¦ä¸²-ii&#34;&gt;&lt;a href=&#34;https://leetcode-cn.com/problems/string-compression-ii/&#34;&gt;1531. å‹ç¼©å­—ç¬¦ä¸² II&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;æŒºå¥½ä¸€é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹æƒ³çš„æ˜¯è´ªå¿ƒï¼Œä¼˜å…ˆæŠŠæ¥è¿‘1ã€2ã€10ã€100çš„å­—æ¯å‰ªä¸€å‰ªï¼Œå› ä¸ºè¿™å‡ ä¸ªæ•°å‡ä¸€ä¹‹åæ•´ä½“é•¿åº¦æ•°é‡ä¼šå‡å°ã€‚ä½†æ˜¯æ²¡æ³•å¤„ç†&lt;code&gt;aabbaa&lt;/code&gt;,2è¿™ç»„æ•°æ®ï¼Œå› ä¸ºbbåˆ é™¤ä¹‹åaä¼šè¿åˆ°ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘dpè§£æ³•ã€‚åˆ é™¤ä¸è¶…è¿‡kä¸ªå­—ç¬¦ï¼Œç­‰ä»·äºé€‰å–&lt;code&gt;s.size()-k&lt;/code&gt;ä¸ªå­—ç¬¦ã€‚å› ä¸ºå¤šåˆ ç»“æœåªä¼šæ›´ä¼˜æˆ–è€…ç›¸ç­‰ï¼Œä¸ä¼šæ›´å·®ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ é™¤kä¸ªã€‚&lt;/p&gt;
&lt;p&gt;è§‚å¯Ÿæœ€ç»ˆå­—ç¬¦ï¼Œä¸€å®šæ˜¯ä¸€æ®µæ®µè¿ç»­çš„å­—æ¯æ‹¼æˆçš„&lt;s&gt;å…¶å®åŸå§‹å­—ç¬¦ä¹Ÿæ˜¯è¿™æ ·&lt;/s&gt;ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨dpçš„æ—¶å€™ï¼Œé€‰æ‹©ç¬¬&lt;code&gt;i&lt;/code&gt;ä¸ªå­—ç¬¦åï¼Œåªéœ€è¦è€ƒè™‘é€‰å–åé¢å’Œ&lt;code&gt;s[i]&lt;/code&gt;ç›¸åŒçš„å­—ç¬¦å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;è®¾&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;dp[i][j]&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;è¡¨ç¤ºä»iå¼€å§‹ï¼Œä¸€å…±é€‰æ‹©äº†jä¸ªå­—ç¬¦çš„æœ€ä¼˜è§£ã€‚&lt;/p&gt;
&lt;p&gt;é€‰å–iæ—¶:&lt;/p&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;munderover&gt;&lt;mi&gt;min&lt;/mi&gt;&lt;mo&gt;â¡&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;.&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;âˆ’&lt;/mo&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo separator=&#34;true&#34;&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;dp[i][j] = \min\limits_{a=i}^{s.size()} cp(same(i,a)) + dp[a+1][j-same(i,a)]
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:2.306524em;vertical-align:-0.727664em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mop op-limits&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.5788600000000002em;&#34;&gt;&lt;span style=&#34;top:-2.072336em;margin-left:0em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mrel mtight&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.7em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span&gt;&lt;span class=&#34;mop&#34;&gt;min&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.65386em;margin-left:0em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.7em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mtight&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.04398em;&#34;&gt;z&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen mtight&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mclose mtight&#34;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;â€‹&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.727664em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;âˆ’&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mpunct&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.16666666666666666em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­&lt;code&gt;cp&lt;/code&gt;è¡¨ç¤ºxä¸ªç›¸åŒå­—ç¬¦å‹ç¼©åçš„é•¿åº¦ï¼Œ&lt;code&gt;same(i,j)&lt;/code&gt;è¡¨ç¤ºåŒºé—´&lt;code&gt;[i,j]&lt;/code&gt;ä¸­ä¸&lt;code&gt;s[i]&lt;/code&gt;ç›¸åŒçš„å­—ç¬¦ä¸ªæ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸é€‰iæ—¶ï¼Œ&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;dp[i][j]=dp[i+1][j]&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mrel&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2777777777777778em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mbin&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mspace&#34; style=&#34;margin-right:0.2222222222222222em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:1em;vertical-align:-0.25em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;mopen&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mord mathdefault&#34; style=&#34;margin-right:0.05724em;&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-cpp&#34;&gt;int cp(int x)
{
    if (x &amp;lt;= 1) return 1;
    if (x &amp;lt; 10) return 2;
    if (x &amp;lt; 100) return 3;
    return 4;
}
int dp[101][101];
int getLengthOfOptimalCompression(string s, int k) {
    k = s.size() - k;
    memset(dp, 0x3f, sizeof(dp));
    const int INF = 0x3f3f3f3f;
    dp[s.size()][0] = 0;
     for (int i = s.size() - 1; i &amp;gt;= 0; --i)
    {
        for (int j = 0; j &amp;lt;= k; ++j)
        {
            if (dp[i + 1][j] &amp;lt; INF)
                dp[i][j] = dp[i + 1][j];
            else break;
        }
        int cnt = 0;
        for (int j = i; j &amp;lt; s.size(); ++j)
        {
            if (s[j] == s[i]) cnt++;
            for (int a = 0; a + cnt &amp;lt;= k; ++a)
            {
                if (dp[j + 1][a] &amp;lt; INF)
                    dp[i][a + cnt] = min(dp[i][a + cnt], dp[j + 1][a] + cp(cnt));
                else break;
            }
        }
    }
    return dp[0][k];
}
&lt;/code&gt;&lt;/pre&gt;
">LeetCode ç¬¬ 199 åœºå‘¨èµ›é¢˜è§£</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://codemogg.cn/post/about/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™å‘€ï¼Œå¾ˆé«˜å…´é‡è§ä½ ï¼ğŸ¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å…³äºæœ¬ç«™&#34;&gt;ğŸ  å…³äºæœ¬ç«™&lt;/h2&gt;
&lt;h2 id=&#34;åšä¸»æ˜¯è°&#34;&gt;ğŸ‘¨â€ğŸ’» åšä¸»æ˜¯è°&lt;/h2&gt;
&lt;h2 id=&#34;å…´è¶£çˆ±å¥½&#34;&gt;â›¹ å…´è¶£çˆ±å¥½&lt;/h2&gt;
&lt;h2 id=&#34;è”ç³»æˆ‘å‘€&#34;&gt;ğŸ“¬ è”ç³»æˆ‘å‘€&lt;/h2&gt;
">å…³äº</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + 'ç§’ä¹‹å‰';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + 'åˆ†é’Ÿä¹‹å‰';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + 'å°æ—¶ä¹‹å‰';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + 'å¤©ä¹‹å‰';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //æ‹¿æ¥ä¸»ä¹‰(çœŸé¦™)^_^ï¼ŒClipboard å®ç°æ‘˜è‡ªæ˜é‡‘ https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // åˆ¤æ–­æ˜¯ä¸æ˜¯iosç«¯
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //åˆ›å»ºæ–‡æœ¬å…ƒç´ 
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //é€‰æ‹©å†…å®¹
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //å¤åˆ¶åˆ°å‰ªè´´æ¿
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("å¤åˆ¶é”™è¯¯ï¼è¯·æ‰‹åŠ¨å¤åˆ¶ï¼")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === 'å¤åˆ¶æˆåŠŸ') {
        return;
      }
      e.srcElement.textContent = 'å¤åˆ¶æˆåŠŸ';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === 'å¤åˆ¶æˆåŠŸ') {
            elem.textContent = 'å¤åˆ¶ä»£ç '
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = 'å¤åˆ¶ä»£ç ';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="/media/js/motion.js"></script>

<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>





</html>